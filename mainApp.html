<!DOCTYPE html>
<html>

<head>
    <title>DeskSpacing</title>
    <link rel="icon" href="favicon.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-172455339-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-172455339-1');
    </script>
    <link rel="stylesheet" href="css/icomoon.css">
    <script language="Javascript">
        var isMobile = {
            Android: function () {
                return navigator.userAgent.match(/Android/i);
            },
            BlackBerry: function () {
                return navigator.userAgent.match(/BlackBerry/i);
            },
            iOS: function () {
                return navigator.userAgent.match(/iPhone|iPad|iPod/i);
            },
            Opera: function () {
                return navigator.userAgent.match(/Opera Mini/i);
            },
            Windows: function () {
                return navigator.userAgent.match(/IEMobile/i);
            },
            any: function () {
                return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
            }
        };
        window.onload = function () {
            var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));

            if (isMobile.any()) {
                alert("Welcome to DeskSpacing! Unfortunately DeskSpacing is an experience for users on desktop only for now. If you are interested in a mobile version of the app, let us know at deskspacing@gmail.com. Sorry for the inconvenience!");
            }
            /*if (mobile) {
                alert("Welcome to DeskSpacing! Unfortunately DeskSpacing is an experience for users on desktop only for now. If you are interested in a mobile version of the app, let us know at deskspacing@gmail.com . Sorry for the inconvenience! ");
            } else {

            }*/
        }
    </script>
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="styleNew.css" />

</head>

<body>

    <div class="scene">

        <main class="container-fluid d-flex h-100 flex-column" style="padding: 0px;">
            <div class="container-fluid">
                <nav class="navbar navbar-expand-lg">
                    <a class="navbar-brand" href="index.html" style="border: 0px !important;">DeskSpacing</a>

                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mainApp.html" style="color: #B32F30 !important;">Setup
                                    Creator<span class="sr-only">(current)</span></a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="about.html">Contact</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="https://twitter.com/DeskSpacing" style="color: #1C9CEB"
                                    target="_blank">Follow
                                    us on Twitter for
                                    updates! <span class="icon-twitter"></span> </a>
                            </li>

                        </ul>
                    </div>
                    <button type="button" id="saveModalButton" class="btn btn-info my-2 my-sm-0" type="submit"
                        data-toggle="modal" data-target="#saveModal" style="display: none;">Share / Save </button>
                    <p>&nbsp;&nbsp;</p>
                    <button type="button" class="btn btn-outline-primary my-2 my-sm-0" type="submit" data-toggle="modal"
                        data-target="#exampleModal">Keybinds</button>
                    <p>&nbsp;&nbsp;</p>
                    <button class="btn btn-success my-2 my-sm-0" type="submit" data-toggle="modal"
                        data-target="#tutorialModal">Beginner Tutorial</button>
                </nav>

            </div>
            <div class="row flex-grow-1" style="padding-left: 10px;">

                <div class="col-md-4 col-md-push-8" style="max-width: 450px; padding: 0px;">
                    <!--max-width: 600px;-->
                    <div class="container" style="height: 65vh; overflow-y: auto;">
                        <div class="row">
                            <button class="btn btn-dark btn-block" type="button" data-toggle="collapse" data-target="#filterCollapse" 
                                style="margin: 5px; padding: 4px;" aria-expanded="false" aria-controls="filterCollapse">
                                <span class="float-left h5">&nbsp&nbspFilters</span>
                            </button>
                            <div class="collapse" id="filterCollapse" style="width: 100%; margin-bottom: 10px;">
                                <div class= "row" style="margin: 0px; padding-left: 10px; width: 100%;" id="filterDiv">
                                    <div class="col-xl filterCol">
                                        <ul class="filterList" id="filterList">
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="deskCheck" name="Desk" 
                                                    value="off" onclick="toggleCheck('deskCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="deskFilter">&nbspDesks</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="monitorCheck" name="Monitor" 
                                                    value="off" onclick="toggleCheck('monitorCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="monitorFilter">&nbspMonitors</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="keyboardCheck" name="Keyboard" 
                                                    value="off" onclick="toggleCheck('keyboardCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="keyboardFilter">&nbspKeyboards</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="mouseCheck" name="Mice" 
                                                    value="off" onclick="toggleCheck('mouseCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="mouseFilter">&nbspMice</label>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-xl filterCol">
                                        <ul class="filterList" id="filterList">
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="mousepadCheck" name="Mousepad" value="off" onclick="toggleCheck('mousepadCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="deskFilter">&nbspMousepads</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="speakerCheck" name="Speaker" value="off" onclick="toggleCheck('speakerCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="monitorFilter">&nbspSpeakers</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="audioCheck" name="Audio" value="off" onclick="toggleCheck('audioCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="keyboardFilter">&nbspAudio Equip.</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="computerCheck" name="Computer" value="off" onclick="toggleCheck('computerCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="mouseFilter">&nbspComputers</label>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-xl filterCol">
                                        <ul class="filterList" id="filterList">
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="chairCheck" name="Chair" value="off" onclick="toggleCheck('chairCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="deskFilter">&nbspChairs</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="furnitureCheck" name="Furniture" value="off" onclick="toggleCheck('furnitureCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="monitorFilter">&nbspFloor Furniture</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="primitiveCheck" name="Primitive" value="off" onclick="toggleCheck('primitiveCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="keyboardFilter">&nbspBasic Shapes</label>
                                                </div>
                                            </li>
                                            <li>
                                                <div class="form-check">
                                                    <input type="checkbox" class="form-check-input checkbox" id="miscCheck" name="Misc" value="off" onclick="toggleCheck('miscCheck')" autocomplete="off">
                                                    <label class="form-check-label h4" for="mouseFilter">&nbspMiscellaneous</label>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <button class="btn btn-dark btn-sm" type="button" id="applyFilters" style="margin-left: 30px; padding: 8px; padding-left: 20px; padding-right: 20px;"
                                    style="margin: 5px;" onclick="applyFilters()" aria-expanded="false" aria-controls="filterCollapse">
                                    Apply
                                </button>
                                <button class="btn btn-dark btn-sm" type="button" id="applyFilters" style="margin-left: 30px; padding: 8px; padding-left: 20px; padding-right: 20px;"
                                    style="margin: 5px;" onclick="clearFilters()" aria-expanded="false" aria-controls="filterCollapse">
                                    Clear
                                </button>
                            </div>
                            <div class="form-group mx-sm-3 mb-2" style="width: 100%;">
                                <input type="text" class="form-control" id="searchItems" placeholder="Search..." onkeyup="itemSearch()" onclick="disablePicking()" autocomplete="off">
                            </div>
                        </div>

                        <div class="row">
                            <div class="menuCol col-xl" style="height: 100%; overflow-y: auto;">
                                <ul id="itemList">
                                    <template id="productRow">
                                        <li id="itemList-elem" class="itemList-elem">
                                            <div class="row">
                                                <div class="col-xs">
                                                    <div class="productPictureImg float-left">
                                                        <img class="rounded" width="125px" height="125px"
                                                            src="" id="productImage">
                                                    </div>
                                                </div>
                                        
                                                <div class="col-xl centerTopBottom">
                                                    <div class="innerDescriptionDiv">
                                                        <h3 id="productTitle">
                                                            
                                                        </h3>
                                                        <div class="row">
                                                            <div class="col-xl">
                                                                <h4 id="productPrice">
                                                                    &nbsp&nbsp&nbsp&nbsp
                                                                </h4>
                                                                <button type="button" class="btn btn-primary text-center btn-sm btn-block p-2"
                                                                    onclick="" id="productAdd">
                                                                    Add
                                                                </button>
                                                            </div>
                                                            <div class="col-xl">
                                                                <h4 class="customOrNot" id="productCustom">
                                                                    &nbsp&nbsp&nbsp&nbsp
                                                                </h4>
                                                                <button type=" button" class="btn btn-secondary btn-sm text-center btn-block p-2"
                                                                    onclick="" id="productReplace">
                                                                    Replace
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    </template>
                                
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="container" style="padding: 0px;">
                        <div class="row" style="margin: 0px; width: 100%;">
                            <div class="col-xl" style="padding: 0px;" id="optionsPanel">
                                <div class="card itemOptionsCard">
                                    <div class="card-body" style="padding: 0px; padding-left: 10px;">
                                        <h5>
                                            Item Options
                                        </h5>
                                    </div>
                                </div>

                                <div id="optionsPanelContent">

                                </div>

                                <!--object with no options-->
                                <template id="itemOptions0">
                                    <div>
                                        <h3 id="optionsTitle" style="text-align: center;">
                                            Jarvis Standing Desk
                                        </h3>
                                        <div class="productBarrier"></div>
                                        <br>
                                        <div class="optionsImg">
                                            <img class="rounded centerImg" width="150px" height="150px"
                                                src="Model thumbnails\\standing desk 1.jpg" id="productImage">
                                        </div>
                                    </div>
                                </template>

                                <!--object with dropdown-->
                                <template id="itemOptions1">
                                    <div>
                                        <h3 id="optionsTitle" style="text-align: center;">
                                            Jarvis Standing Desk
                                        </h3>
                                        <div class="productBarrier"></div>
                                        <br>
                                        <div class="row" style="width: 100%; margin: 0px;">
                                            <div class="col-xl">
                                                <select class="centerImg" id="drop1" autocomplete="off" style="width: 90%;">

                                                </select>
                                                <button type="button" class="btn btn-secondary btn-sm text-center p-2 centerImg"
                                                    onclick="" id="applyItemOptions" style="margin-top: 15px; width: 50%;">
                                                    Apply
                                                </button>
                                            </div>
                                            <div class="col-xl">
                                                <div class="optionsImg">
                                                    <img class="rounded centerImg" width="150px" height="150px"
                                                        src="Model thumbnails\\standing desk 1.jpg" id="productImage">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </template>

                                <!--primitive desk-->
                                <template id="itemOptions2">
                                    <div>
                                        <h3 id="optionsTitle" style="text-align: center;">
                                            Jarvis Standing Desk
                                        </h3>
                                        <div class="productBarrier"></div>
                                        <br>
                                        <div class="row" style="width: 100%; margin: 0px;">
                                            <div class="col-xl">
                                                <select class="centerImg" id="drop1" autocomplete="off" style="width: 90%; margin-bottom: 5px;">
                                                    
                                                </select>
                                                <p class="fieldText">Length:&nbsp<input class="optionsTextField" id="field1" type="text" onkeypress="validate(event)" 
                                                    onclick="disablePicking()" style="width: 30%;" value="1" autocomplete="off"></p>
                                                <p class="fieldText">Width:&nbsp&nbsp<input class="optionsTextField" id="field2" type="text" onkeypress="validate(event)" 
                                                    onclick="disablePicking()" style="width: 30%;" value="1" autocomplete="off"></p>
                                                <p class="fieldText">Height:&nbsp<input class="optionsTextField" id="field3" type="text" onkeypress="validate(event)" 
                                                    onclick="disablePicking()" style="width: 30%;" value="1" autocomplete="off"></p>
                                                <button type="button" class="btn btn-secondary btn-sm text-center p-2 centerImg"
                                                    onclick="" id="applyItemOptions" style="margin-top: 15px; width: 50%;">
                                                    Apply
                                                </button>
                                            </div>
                                            <div class="col-xl">
                                                <div class="optionsImg">
                                                    <img class="rounded float-left" width="150px" height="150px"
                                                        src="Model thumbnails\\standing desk 1.jpg" id="productImage">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </template>

                                <!--primitive-->
                                <template id="itemOptions3">
                                    <div>
                                        <h3 id="optionsTitle" style="text-align: center;">
                                            Jarvis Standing Desk
                                        </h3>
                                        <div class="productBarrier"></div>
                                        <br>
                                        <div class="row" style="width: 100%; margin: 0px;">
                                            <div class="col-xl">
                                                <p class="fieldText">Length:&nbsp<input class="optionsTextField" id="field1" type="text" onkeypress="validate(event)" 
                                                    onclick="disablePicking()" style="width: 30%;" value="1" autocomplete="off"></p>
                                                <p class="fieldText">Width:&nbsp&nbsp<input class="optionsTextField" id="field2" type="text" onkeypress="validate(event)" 
                                                    onclick="disablePicking()" style="width: 30%;" value="1" autocomplete="off"></p>
                                                <p class="fieldText">Height:&nbsp<input class="optionsTextField" id="field3" type="text" onkeypress="validate(event)" 
                                                    onclick="disablePicking()" style="width: 30%;" value="1" autocomplete="off"></p>
                                                <button type="button" class="btn btn-secondary btn-sm text-center p-2 centerImg"
                                                    onclick="" id="applyItemOptions" style="margin-top: 15px; width: 50%;">
                                                    Apply
                                                </button>
                                            </div>
                                            <div class="col-xl">
                                                <div class="optionsImg">
                                                    <img class="rounded float-left" width="150px" height="150px"
                                                        src="Model thumbnails\\standing desk 1.jpg" id="productImage">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </template>

                                <!--sphere primitive-->
                                <template id="itemOptions4">
                                    <div>
                                        <h3 id="optionsTitle" style="text-align: center;">
                                            Jarvis Standing Desk
                                        </h3>
                                        <div class="productBarrier"></div>
                                        <br>
                                        <div class="row" style="width: 100%; margin: 0px;">
                                            <div class="col-xl">
                                                <p class="fieldText">Length:&nbsp<input class="optionsTextField" id="field1" type="text" onkeypress="validate(event)" 
                                                    onclick="disablePicking()" style="width: 30%;" value="1" autocomplete="off"></p>
                                                <button type="button" class="btn btn-secondary btn-sm text-center p-2 centerImg"
                                                    onclick="" id="applyItemOptions" style="margin-top: 15px; width: 50%;">
                                                    Apply
                                                </button>
                                            </div>
                                            <div class="col-xl">
                                                <div class="optionsImg">
                                                    <img class="rounded float-left" width="150px" height="150px"
                                                        src="Model thumbnails\\standing desk 1.jpg" id="productImage">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </template>

                                <!--monitor-->
                                <template id="itemOptions5">
                                    <div>
                                        <h3 id="optionsTitle" style="text-align: center;">
                                            Jarvis Standing Desk
                                        </h3>
                                        <div class="productBarrier"></div>
                                        <br>
                                        <div class="row" style="width: 100%; margin: 0px;">
                                            <div class="col-xl">
                                                <div class="float-left" style="margin-left: 20px;">
                                                    <select class="float-left" id="drop1" autocomplete="off" style="width: 40%; margin-bottom: 5px;">
                                                    </select>
                                                    <p class="fieldText float-left"><input type="checkbox" class="checkbox" id="check1" name="Mousepad" value="off" onclick="toggleCheck('check1')" autocomplete="off">&nbspNo Stand</p>
                                                    <button type="button" class="btn btn-secondary btn-sm text-center p-2 centerImg"
                                                        onclick="" id="applyItemOptions" style="margin-top: 15px; width: 50%;">
                                                        Apply
                                                    </button>
                                                </div> 
                                            </div>
                                            <div class="col-xl">
                                                <div class="optionsImg">
                                                    <img class="rounded float-left" width="150px" height="150px"
                                                        src="Model thumbnails\\standing desk 1.jpg" id="productImage">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </template>

                                <!--grid-->
                                <template id="itemOptions6">
                                    <div>
                                        <h3 id="optionsTitle" style="text-align: center;">
                                            Jarvis Standing Desk
                                        </h3>
                                        <div class="productBarrier"></div>
                                        <br>
                                        <div class="row" style="width: 100%; margin: 0px;">
                                            <div class="col-xl">
                                                <div class="float-left" style="margin-left: 20px;">
                                                    <label for="range1" class="fieldText">Horizontal Panels</label>
                                                    <input type="range" class="custom-range" min="1" max="5" id="range1">
                                                    <label for="range2" class="fieldText">Vertical Panels</label>
                                                    <input type="range" class="custom-range" min="1" max="5" id="range2">

                                                    <button type="button" class="btn btn-secondary btn-sm text-center p-2 centerImg"
                                                        onclick="" id="applyItemOptions" style="margin-top: 15px; width: 50%;">
                                                        Apply
                                                    </button>
                                                </div> 
                                            </div>
                                            <div class="col-xl">
                                                <div class="optionsImg">
                                                    <img class="rounded float-left" width="150px" height="150px"
                                                        src="Model thumbnails\\standing desk 1.jpg" id="productImage">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                            </div>
                            
                            
                            
                            
                            
                            <!-- <div class="col-xl" style="padding: 0px;">
                                <div class="card itemOptionsCard">
                                    <div class="card-body" style="padding: 0px; padding-left: 10px;">
                                        <h5>
                                            Item Options
                                        </h5>
                                    </div>
                                </div>
                                <div class="row" id="itemOptions" style="margin: 0px;">
                                    <div class="col-xl">
                                        <div class="input-group mb-3 inputOption">
                                            <div class="input-group-prepend dark">
                                              <span class="input-group-text normalText" id="inputGroup-sizing-default">Width</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Object width input" aria-describedby="inputGroup-sizing-default">
                                          </div>
                                          <div class="input-group mb-3 inputOption">
                                            <div class="input-group-prepend dark">
                                              <span class="input-group-text normalText" id="inputGroup-sizing-default">Depth</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Object width input" aria-describedby="inputGroup-sizing-default">
                                          </div>
                                          <div class="input-group mb-3 inputOption">
                                            <div class="input-group-prepend dark">
                                              <span class="input-group-text normalText" id="inputGroup-sizing-default">Height</span>
                                            </div>
                                            <input type="text" class="form-control" aria-label="Object width input" aria-describedby="inputGroup-sizing-default">
                                          </div>
                                    </div>
                                    <div class="col-xl">
                                        <div class="container inputOptions text-center">
                                            <select class="inputOptions" name="textureOptions" id="textureOptions">
                                                <option value="volvo">Italian Oak</option>
                                                <option value="saab">Saab</option>
                                                <option value="mercedes">Mercedes</option>
                                                <option value="audi">Audi</option>
                                            </select> 
                                        </div>
                                        <div class="productPictureImg text-center">
                                            <img class="rounded" width="125px" height="125px"
                                                src="Model thumbnails\customDeskItalianOak.jpg">
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="saveModal" tabindex="-1" role="dialog"
                        aria-labelledby="saveModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title text-white" id="shareModalLabel">Share / Save Your
                                        Setup
                                    </h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body text-white">
                                    <h2 class="text-center">Your Custom Setup Link</h2>
                                    <p class="text-center">Use this link to come back to your setup, or share with a
                                        friend!</p>
                                    <form>
                                        <div class="form-group">
                                            <!--<label for="exampleInputEmail1">Email address</label>-->

                                            <input type="email" class="form-control" id="customLinkForm"
                                                aria-describedby="emailHelp" value="Deskspacing.com/gottem">

                                            <p id="emailHelp" class="form-text text-warning text-center"
                                                style="font-size: 14px;">
                                                <span class="icon-warning text-warning"></span> This link is custom
                                                to your exact setup, after making changes make sure to get a new
                                                link!</p>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-dismiss="modal">Close</button>

                                </div>
                            </div>
                        </div>
                </div>

                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title text-white" id=" exampleModalLabel">Controls /
                                        Keybinds
                                    </h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <h4>Camera controls:</h4>
                                    <p>
                                        <span id="keybindLetter" class="text-white"><strong>Left Mouse
                                                Button</strong></span> -
                                        Drag to
                                        rotate camera
                                    </p>
                                    <p>
                                        <span id="keybindLetter" class="text-white"><strong>Shift + Left Mouse
                                                Button</strong></span> -
                                        Pan camera
                                    </p>
                                    <p>
                                        <span id=keybindLetter" class="text-white"><strong>Scroll Wheel</strong>
                                        </span> - Control
                                        camera zoom
                                    </p>
                                    <h4>Object controls:</h4>
                                    <p>
                                        <span id="keybindLetter" class="text-white"><strong>R</strong></span> -
                                        Toggle
                                        rotate/translate
                                    </p>
                                    <p>
                                        <span id="keybindLetter" class="text-white"><strong>F</strong></span> - Toggle all axes on
                                    </p>
                                    <p>
                                        <span id="keybindLetter" class="text-white"><strong>Delete / Backspace /
                                                D</strong></span>
                                        -
                                        Delete selected
                                        object
                                    </p>
                                    <span id="keybindLetter" class="text-white"><strong>- /
                                            +</strong></span> -
                                    Change controls
                                    size
                                    </p>
                                    <!-- <p>
                                        <span id="keybindLetter" class="text-white"><strong>C</strong></span> -
                                        Hide
                                        controls
                                    </p> -->
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-dismiss="modal">Close</button>

                                </div>
                            </div>
                        </div>
                </div>
                
                <div class="col-md col-md-pull-4" id="rightSideContainer">
                    <canvas id="threeCanvas" style="z-index: 0; background-color: grey;">
                        <button id="settingsButton" class="btn btn-secondary" type="submit" data-toggle="modal"
                            data-target="#settingsModal" style="display: none;"><span class="icon-cog"></span></button>
                        <button id="resetCameraButton" class="btn btn-secondary" onclick="resetCamera()">Reset
                            Camera</button>
                    </canvas>
                    <button id="settingsButton" class="btn btn-secondary" type="submit" data-toggle="modal"
                        data-target="#settingsModal" style="display: none;"><span class="icon-cog"></span></button>
                    <button id="resetCameraButton" class="btn btn-secondary" onclick="resetCamera()">Reset
                        Camera</button>
                    <!-- <button id="toggleAxesButton" class="btn btn-secondary" onclick="resetCamera()">
                        All Axes</button> -->
                </div>

            </div>

            <!--STARTING MODAL-->
            <div class="starterModal modal fade" id="starterModal">
                <div class="modal-dialog" role="document" style="max-height: 500px;">
                    <div class="modal-content">
                        <div class="modal-body">
                            <h2 class="text-white text-center style=" text-decoration: underline;">
                                Welcome to DeskSpacing Setup Creator!
                            </h2>

                            <h5 class="text-white">New user?</h5>
                            <p>Click here for a tutorial on the basics of DeskSpacing controls</p>
                            <div class="text-center">
                                <button class="btn btn-success introTutorialButton" type="submit" data-toggle="modal"
                                    data-target="#tutorialModal">Beginner Tutorial</button>
                            </div>
                            <h5 class="text-white">Update 1.1</h5>
                            <p>Added Features:</p>
                            <ul style="list-style-type: '- ';">
                                <li>Added a plethora of new objects, including desks, monitors, monitor stands, speakers,
                                    computer towers, and more!
                                </li>
                                <li>Redesigned the entire UI with a search bar and filters to work better with the growing
                                    number of objects.
                                </li>
                                <li>Updated each objects card with price estimates to help you better plan out your build.
                                </li>
                                <li>Temporarily disabled the Share/Save button until we can get it working with the 
                                    new way objects are added in.
                                </li>
                                <li>Made small changes to the controls. New controls can be found here:
                                </li>
                                <div class="text-center">
                                    <button class="btn btn-secondary introTutorialButton" type="submit" data-toggle="modal"
                                        data-target="#exampleModal">Keybinds</button>
                                </div>
                            </ul>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                        </div>
                    </div>
                </div>
            </div>

            <!--SETTINGS MODAL-->
            <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title text-white" id=" exampleModalLabel">Settings
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <h4 class="text-white" style="text-decoration: underline;">
                                Units
                            </h4>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input checked" name="optionsRadios"
                                        id="optionsRadios1" value="0" checked>
                                    Imperial (Inches)
                                </label>
                            </div>
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input" name="optionsRadios"
                                        id="optionsRadios1" value="1" onchange="imperialToMetric()">
                                    Metric (Centimeters)
                                </label>
                            </div>





                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                        </div>
                    </div>
                </div>
            </div>

            <!--TUTORIAL MODAL-->
            <div class="modal fade" id="tutorialModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-xl" role="document">
                    <!--mw-100 w-75-->
                    <div class="modal-content customModalCSS">
                        <div class="modal-header">
                            <h5 class="modal-title text-white" id=" exampleModalLabel">Beginner Tutorial
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                                <ol class="carousel-indicators">
                                    <li data-target="#carouselExampleControls" data-slide-to="0" class="active"></li>
                                    <li data-target="#carouselExampleControls" data-slide-to="1"></li>
                                    <li data-target="#carouselExampleControls" data-slide-to="2"></li>
                                    <li data-target="#carouselExampleControls" data-slide-to="3"></li>
                                    <li data-target="#carouselExampleControls" data-slide-to="4"></li>
                                    <li data-target="#carouselExampleControls" data-slide-to="5"></li>
                                    <li data-target="#carouselExampleControls" data-slide-to="6"></li>
                                </ol>
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img class="d-block w-100" src="Click Through Tutorial/slide 1.gif"
                                            alt="First slide">
                                        <div class="carousel-caption d-none d-md-block modalTextBackground">
                                            <h5>Camera controls</h5>
                                            <p>Rotate the scene with the left mouse button and zoom with the scroll
                                                wheel.</p>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="Click Through Tutorial/slide 2.gif"
                                            alt="Second slide">
                                        <div class="carousel-caption d-none d-md-block modalTextBackground">
                                            <h5>Choosing your desk</h5>
                                            <p>Use the drop down menu to choose different size varients.</p>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="Click Through Tutorial/slide 3.gif"
                                            alt="Third slide">
                                        <div class="carousel-caption d-none d-md-block modalTextBackground">
                                            <h5>Adding objects</h5>
                                            <p>Click Add to add objects and press <strong>BACKSPACE</strong> to delete
                                                them.</p>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="Click Through Tutorial/slide 4.gif"
                                            alt="Fourth slide">
                                        <div class="carousel-caption d-none d-md-block modalTextBackground">
                                            <h5>Replacing objects</h5>
                                            <p>Use the replace button to quickly try out different objects of the same
                                                type in your setup.</p>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="Click Through Tutorial/slide 5.gif"
                                            alt="Fifth slide">
                                        <div class="carousel-caption d-none d-md-block modalTextBackground">
                                            <h5>Moving objects</h5>
                                            <p>Move selected objects by clicking on them and dragging using the
                                                controls. Press <strong>R</strong> to toggle between rotation and
                                                translation controls.</p>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="Click Through Tutorial/slide 6.gif"
                                            alt="Third slide">
                                        <div class="carousel-caption d-none d-md-block modalTextBackground">
                                            <h5>Moving objects</h5>
                                            <p>Use the <strong>X/Y/Z</strong> keys to toggle the respective axes on the
                                                controls. Use the +/- keys to change the controls scale.</p>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <img class="d-block w-100" src="Click Through Tutorial/slide 7.gif"
                                            alt="Third slide">
                                        <div class="carousel-caption d-none d-md-block modalTextBackground">
                                            <h5>Screenshot and share!</h5>
                                            <p>Press <strong>C</strong> to hide the controls. Use Ctrl + Shift + S on
                                                windows or Shift + Command + 4 on mac to take a screenshot.</p>
                                        </div>
                                    </div>
                                </div>
                                <a class="carousel-control-prev" href="#carouselExampleControls" role="button"
                                    data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#carouselExampleControls" role="button"
                                    data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                        </div>
                    </div>
                </div>
            </div>
    </div>
    </main>
    </div>
    </div>
    <script src="dropDownLogic.js"></script>
    <script src="three.min.js"></script>
    <script src="OrbitControls.js"></script>
    <!--<script src="./three/examples/jsm/controls/DragControls.js"></script>-->
    <script src="GLTFLoader.js"></script>
    <script src="three/examples/js/controls/DragControls.js"></script>
    <script src="three/examples/js/controls/TransformControls.js"></script>
    <script src="three/examples/js/loaders/DRACOLoader.js"></script>
    <script src="three/examples/js/loaders/DRACOLoader.js"></script>



    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script> //RECENTLY ADDED FOR BOOTSTRAP TOOLTIPS OVER AMAZON AFFILIATE LINKS
        $("[data-toggle=tooltip]").tooltip();
        $('.starterModal').modal('show');
    </script>

    <script>
        //FUNCTION USE: Makes sure text entered in the box is numbers and also makes sure letters entered don't activate hotkeys
        function validate(evt) {
            var theEvent = evt || window.event;

            // Handle paste
            if (theEvent.type === 'paste') {
                key = event.clipboardData.getData('text/plain');
            } else {
                // Handle key press
                var key = theEvent.keyCode || theEvent.which;
                key = String.fromCharCode(key);
            }
            var regex = /[0-9]|\./;
            if (!regex.test(key)) {
                theEvent.returnValue = false;
                if (theEvent.preventDefault) theEvent.preventDefault();
            }
        }

        var rightSideContainer = document.getElementById("rightSideContainer");
        // check box functionality
        function toggleCheck(elemId) {
            let checkValue = document.getElementById(elemId).value;

            if(checkValue == "off") {
                checkValue = "on";
            } else {
                checkValue = "off";
            }

            document.getElementById(elemId).value = checkValue;
        }

        document.getElementById('saveModalButton').onclick = function () {
            var customLink = createCustomLink();
            document.getElementById("customLinkForm").value = customLink;
        }

        //I believe this exists to allow the html to call unselectPickedObject in the pickHelper class
        function unselectObjectCall() {
            pickHelper.unselectPickedObject();
        }


























        // PICK CLASS



        //Class to help select JS objects
        class PickHelper {
            constructor() {
                this.raycaster = new THREE.Raycaster();
                this.pickedObject = null;
                this.pickedObjectSavedColor = 0;
                this.pickEnabled = true;
            }
            unselectPickedObject() {
                console.log("object unselected");
                console.log(this.pickedObject);
                this.pickedObject = null;
                transformControls.detach();

                hideOptionsPanel();
            }

            // can delete desks 
            deletePicked() {
                if (this.pickedObject != null && this.pickEnabled) {
                    transformControls.detach();

                    scene.remove(this.pickedObject);

                    let remIndex = -1;
                    for (let i = 0; i < objectsArr.length; i++) {
                        if (objectsArr[i].name == this.pickedObject.name) {
                            remIndex = i;
                            i = objectsArr.length;
                        }
                    }

                    if (remIndex != -1) {
                        objectsArr = removeArrElem(objectsArr, remIndex);
                    }

                    this.pickedObject = null;

                    console.log("objectsArr");
                    console.log(objectsArr);
                }
                return objectsArr;
            }

            mouseSelect(normalizedPosition) {
                // cast a ray through the frustum
                this.raycaster.setFromCamera(normalizedPosition, camera);

                // find objects intersected by cast ray
                const intersectedObjects = this.raycaster.intersectObjects(objectsArr, true);

                // to implement this, mouse select would need to only be called when there isn't a drag event happening
                //this.unselectPickedObject();
                // find first intersected object
                let index = 0;
                let interObj;
                while (index < intersectedObjects.length) {
                    interObj = intersectedObjects[index].object.parent;

                    // prevents selection of objects we don't want to select
                    if (!interObj.userData.type.includes("NoSelect")) {
                        // check what type of object the element is
                        if (interObj.type == "Group") {
                            this.pick(interObj);
                            displayOptions(interObj);
                            index = intersectedObjects.length;

                            // activates the correct axes for the type of object
                            if (fixAxes) {
                                transformControls.showY = true;
                                transformControls.showX = true;
                                transformControls.showZ = true;
                            } else if(this.pickedObject.userData.type.includes("WallDecor")) {
                                if(rotateActive) {
                                    transformControls.showY = false;
                                    transformControls.showX = false;
                                    transformControls.showZ = true;
                                } else {
                                    transformControls.showY = true;
                                    transformControls.showX = true;
                                    transformControls.showZ = false;
                                }
                            } else {
                                if(rotateActive) {
                                    transformControls.showY = true;
                                    transformControls.showX = false;
                                    transformControls.showZ = false;
                                } else {
                                    transformControls.showY = false;
                                    transformControls.showX = true;
                                    transformControls.showZ = true;
                                }
                            }
                        } else {
                            console.log("No object selected");
                        }
                    }
                    index++;
                }
            }

            pick(object) {
                if (this.pickEnabled) {
                    console.log("Object just picked: ");
                    console.log(object);

                    transformControls.detach();
                    // attach controls if the object type allows it
                    if (!object.userData.type.includes("NoSelect")) {
                        transformControls.attach(object);
                    }

                    // set picked object
                    this.pickedObject = object;
                }
            }
        }
        const pickPosition = { x: 0, y: 0 };
        clearPickPosition();
        function getCanvasRelativePosition(event) {
            const rect = myCanvas.getBoundingClientRect();
            return {
                x: (event.clientX - rect.left) * rightSideContainer.clientWidth / rect.width,
                y: (event.clientY - rect.top) * rightSideContainer.clientHeight / rect.height,
            };
        }

        function disablePicking() {
            pickHelper.pickEnabled = false;
            console.log("Picking disabled");
        }
        function enablePicking() {
            pickHelper.pickEnabled = true;
            console.log("Picking enabled");
        }

        function clearPickPosition() {
            // unlike the mouse which always has a position
            // if the user stops touching the screen we want
            // to stop picking. For now we just pick a value
            // unlikely to pick something
            pickPosition.x = -100000;
            pickPosition.y = -100000;
        }

        //MOUSE DOWN CODE



















        // SETUP






        const pickHelper = new PickHelper();
        //import * as THREE from './three';
        var controls, dragControls, transformControls;
        var scene = new THREE.Scene();
        scene.background = new THREE.Color(0x2A363B);

        var myCanvas = document.getElementById("threeCanvas");

        var camera = new THREE.PerspectiveCamera(45, myCanvas.clientWidth / myCanvas.clientHeight, 0.1, 5000);
        var renderer = new THREE.WebGLRenderer({ canvas: myCanvas, antialias: true, powerPreference: "high-performance", });

        renderer.setSize(myCanvas.clientWidth, myCanvas.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.outputEncoding = THREE.sRGBEncoding;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        renderer.shadowMap.enabled = true;

        var loader = new THREE.GLTFLoader();
        var textureLoader = new THREE.TextureLoader();

        renderer.setClearColor(0xffffff, 0); // second param is opacity, 0 => transparent
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        renderer.gammaFactor = 2.2;
        renderer.gammaOutput = true;
        renderer.outputEncoding = THREE.sRGBEncoding;

        // LIGHTS AND BACKGROUND

        hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, .7);
        hemiLight.position.set(0, 100, 40);
        hemiLight.castShadow = false;
        scene.add(hemiLight);

        scene.fog = new THREE.Fog(0xa0a0a0, 300, 350);

        light = new THREE.SpotLight(0x444444, 1.5);
        light.position.set(0, 100, 40);

        light.shadow.bias = -0.00001;
        light.shadow.mapSize.width = 1024 * 4;
        light.shadow.mapSize.height = 1024 * 4;
        light.castShadow = true;
        scene.add(light);

        scene.background = new THREE.Color(0x2A363B);

        function resetCamera() {
            controls.reset();
            controls.enableZoom = true;
            controls.enableRotate = true;
            controls.enablePan = true;
            controls.rotateSpeed = 0.7;
            camera.position.set(0, 61.27639300930197, 21.183811053080007);
            camera.rotation.set(-0.3618175319112695, 0, -0.004617427467257444);
            controls.update();
            controls.target.set(0, 30.55, -60);
            controls.enabled = true;

            camera.lookAt(25, 8.5, 35);

            //parseShareableString("[ *PrimitiveBoxFloorFurnitureNoSelect|floor|0,0,-40,|0,0,0,|100,2,70,|darkParquet|* Monitor|small16x9Monitor28|0,30.800000000000004,-57,|0,4.71238898038469,0,| Mouse|defaultMouse|9,30.7,-50,|0,3.141592653589793,0,| Mousepad|QCKSmall|9,30.75,-50,|0,1.5707963267948966,0,| Keyboard|default60PercentKeyboardAllGrey|-3,30.85,-50,|0,4.71238898038469,0,| *FurniturePrimitiveBoxDeskNoSelect|customDesk|0,30.2,-53,|0,0,0,|50,1,20,|italianOak|* *PrimitiveBox|referenceBox|-12.456730542942143,33.2,-54.65369349806694,|0,0.906999410493721,0,|5,5,10,|null|* FurnitureChair|modernOfficeChair|0,2.8,-50,|0,4.71238898038469,0,| ]");
        }

        resetCamera();

        // // copy of the above function for testing purposes
        // function resetCamera1() {
        //     controls.reset();
        //     controls.enableZoom = true;
        //     controls.enableRotate = true;
        //     controls.enablePan = true;
        //     controls.rotateSpeed = 0.7;
        //     camera.position.set(0, 61.27639300930197, 21.183811053080007);
        //     camera.rotation.set(-0.3618175319112695, 0, -0.004617427467257444);
        //     controls.update();
        //     controls.target.set(0, 30.55, -60);
        //     controls.enabled = true;

        //     camera.lookAt(25, 8.5, 35);
        // }














        // DECLARATION SECTION

        var objectsArr = []; // 1D array to store all the objects currently in the scene
        var pickObject = false; // not sure what this is about but I'm afraid to remove it
        var fixAxes = false;
        var filtOptArr = [];
        var oldOption = null;

        // transform controls. for dragging and rotating
        transformControls = new THREE.TransformControls(camera, renderer.domElement);
        transformControls.enabled = true;
        transformControls.size = .7;
        scene.add(transformControls);


























        // EVENT LISTENERS

        document.getElementById('threeCanvas').addEventListener('click', function () {
            enablePicking();
        });

        // event listener for a click on the controls
        transformControls.addEventListener('mouseDown', function () {
            console.log("HIT TRANSFORM CONTROLS");
            pickObject = true;
            controls.enabled = false; // makes it so the camera doesn't rotate when you're trying to drag an object
        });
        transformControls.addEventListener('mouseUp', function () {
            controls.enabled = true; // ^ see above
        });

        // eventListener for a click in the window
        var rightmousemove;
        window.addEventListener('mousedown', function (event) {
            console.log("WINDOW MOUSE DOWN");
            rightmousemove = false;
            if (event.button == 2) {
                rightmousemove = true;
                //   // Right click
            }
            if (pickObject) {
                pickObject = false
            } else {
                console.log("RUNNING SET PICK POSITION");
                setPickPosition(event);
                pickObject = false
            }
        });

        // stops right click drag
        document.addEventListener("mousemove", function (event) {
            if (rightmousemove === true) {
                event.stopImmediatePropagation();
            }
        });

        //window.addEventListener('mouseout', clearPickPosition);
        //window.addEventListener('mouseleave', clearPickPosition);

        window.addEventListener('resize', function () {
            camera.aspect = rightSideContainer.clientWidth / rightSideContainer.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(rightSideContainer.clientWidth, rightSideContainer.clientHeight);
        });

        transformControls.showY = false; //Making the transform controls not show a Y direction.

        function setPickPosition(event) {

            // right side container is a bootstrap column. contains the canvas
            const pos = getCanvasRelativePosition(event);
            pickPosition.x = (pos.x / rightSideContainer.clientWidth) * 2 - 1;
            pickPosition.y = (pos.y / rightSideContainer.clientHeight) * -2 + 1;  // note we flip Y

            pickHelper.mouseSelect(pickPosition);
        }
        var rotateActive = false;

        // adds an event listener to the DOM element of the entire window. If any key is pressed, check the keyCode of the event with a switch statement and go from there
        window.addEventListener('keydown', function (event) {
            switch (event.keyCode) {
                case 8: //BACKSPACE (Delete)
                    if(pickHelper.pickEnabled && pickHelper.pickedObject != null && !pickHelper.pickedObject.userData.type.includes("NoSelect")) {
                        removeOptionsPanel(pickHelper.pickedObject.userData.objectNameBase + "-" + getCountOfObject(pickHelper.pickedObject.name));
                        oldOption = null;
                        objectsArr = pickHelper.deletePicked();
                    }
                    break;
                case 46:
                    if(pickHelper.pickEnabled && pickHelper.pickedObject != null && !pickHelper.pickedObject.userData.type.includes("NoSelect")) {
                        removeOptionsPanel(pickHelper.pickedObject.userData.objectNameBase + "-" + getCountOfObject(pickHelper.pickedObject.name));
                        oldOption = null;
                        objectsArr = pickHelper.deletePicked();
                    }
                    break;
                case 68:
                    if(pickHelper.pickEnabled && pickHelper.pickedObject != null && !pickHelper.pickedObject.userData.type.includes("NoSelect")) {
                        removeOptionsPanel(pickHelper.pickedObject.userData.objectNameBase + "-" + getCountOfObject(pickHelper.pickedObject.name));
                        oldOption = null;
                        objectsArr = pickHelper.deletePicked();
                    }
                    break;
                case 82: // R
                    
                    if (rotateActive) {
                        transformControls.setMode("rotate");
                        if(!fixAxes) {
                            transformControls.showX = false;
                            transformControls.showZ = false;
                            transformControls.showY = true;
                        }
                    } else {
                        transformControls.setMode("translate");
                        if(!fixAxes) {
                            transformControls.showX = true;
                            transformControls.showZ = true;
                            transformControls.showY = false;
                        }
                    }
                    rotateActive = !rotateActive;
                    break;
                case 67:
                    pickHelper.unselectPickedObject();
                    oldOption = null;
                    break;
                case 107: // +, =, num+
                    transformControls.setSize(transformControls.size + 0.1);
                    break;

                case 189:
                case 109: // -, _, num-
                    transformControls.setSize(Math.max(transformControls.size - 0.1, 0.1));
                    break;

                // case 88: // X
                //     transformControls.showX = !transformControls.showX;
                //     break;

                // case 89: // Y
                //     transformControls.showY = !transformControls.showY;
                //     break;

                // case 90: // Z
                //     transformControls.showZ = !transformControls.showZ;
                //     break;
                
                case 70: // toggle showing all axes
                    if(!fixAxes) {
                        transformControls.showX = true;
                        transformControls.showZ = true;
                        transformControls.showY = true;
                    } else if(rotateActive){
                        if(pickHelper.pickedObject.userData.type.includes("WallDecor")) {
                            transformControls.showX = true;
                            transformControls.showZ = false;
                            transformControls.showY = true;
                        } else {
                            transformControls.showX = true;
                            transformControls.showZ = true;
                            transformControls.showY = false;
                        }
                    } else if (!rotateActive) {
                        if(pickHelper.pickedObject.userData.type.includes("WallDecor")) {
                            transformControls.showX = false;
                            transformControls.showZ = true;
                            transformControls.showY = false;
                        } else {
                            transformControls.showX = false;
                            transformControls.showZ = false;
                            transformControls.showY = true;
                        }
                    }
                    
                    fixAxes = !fixAxes;
                    break;
            }

        });

        // does nothing
        window.addEventListener('keyup', function (event) {

            switch (event.keyCode) {
                /*
                case 16: // Shift
                    transformControls.setTranslationSnap(null);
                    transformControls.setRotationSnap(null);
                    transformControls.setScaleSnap(null);
                    break;
                */
            }

        });










        // DICTIONARIES







        var searchArr = [
            //0itemName      1display name        2price  3custom or not   4thumbnail path             5function call  6type  7default add    8search terms
            //["texturePanel", "Wall Texture Panel", "$6 Each", true, "Model thumbnails/wall texture panel.jpg", "addGrid", "MiscWallDecoration", "texturePanel",""],
            
            ["modernDesk", "Jarvis Standing Desk", "$550", false, "Model thumbnails\\standing desk 1.jpg", "addDesk","DeskNoSelect", "modernDesk",""],
            ["standingDesk", "Standing Desk", "$1100", false, "Model thumbnails\\standing desk 2.jpg", "addDesk", "DeskNoSelect", "standingDesk",""],
            ["linnmonDesk", "Ikea Linnmon Desk", "$25-$45", true, "Model thumbnails\\linnmon desk.jpg", "addDeskCustom", "DeskNoSelect", "linnmonDesk39",""],
            ["alexDesk", "Alex Drawers with Tabletop", "$220", true, "Model thumbnails\\alex desk.jpg", "addDeskCustom", "DeskNoSelect", "alexDesk61",""],
            ["bekantLShaped", "Ikea Bekant Desk", "280", true, "Model thumbnails\\L shaped desk.jpg", "addDeskCustom", "DeskNoSelect", "bekantLShapedLeft",""],
            ["customDesk", "Custom Desk", "$--", true, "Model thumbnails/customDeskLightAlderwood.jpg", "addPrimitiveDesk", "DeskPrimitiveBoxNoSelect", "customDesk",""],
            ["malmDesk", "Ikea Malm Desk", "$180", true, "Model thumbnails/malm desk black.jpg", "addDeskCustom", "DeskNoSelect", "malmDeskBlack",""],
            ["outputPlatform", "Output Platform", "$550", false, "Model thumbnails/output platform.jpg", "addDesk", "DeskNoSelect", "outputPlatform",""],
            ["drawerDesk", "Ikea Arkelstorp Desk", "$200", false, "Model thumbnails/regular desk 1.jpg", "addDesk", "DeskNoSelect", "drawerDesk",""],
            
            ["largeCurved16x9Monitor", "Curved 16:9 Monitor", "$220-$395", true, "Model thumbnails\\curved large 16 9 monitor.jpg", "addMonitor", "Monitor","largeCurved16x9Monitor25"],
            ["small16x9Monitor", "16:9 Monitor", "$105-$205", true, "Model thumbnails\\16_9 monitor 3.jpg", "addMonitor", "Monitor", "small16x9Monitor22",""],
            ["flat21x9Monitor", "21:9 Monitor", "$180-$380", true, "Model thumbnails/21 9 monitor 2 non curved.jpg", "addMonitor", "Monitor","flat21x9Monitor25", ""],
            ["curved21x9Monitor", "21:9 Curved Monitor", "$280-$1,000", true, "Model thumbnails\\Ultrwide Monitor 1.jpg", "addMonitor", "Monitor","curved21x9Monitor30", ""],
            ["curved32x9Monitor", "Curved 32:9 Monitor", "$800-$1500", true, "Model thumbnails/32_9 monitor.jpg", "addMonitor", "Monitor","curved32x9Monitor43", ""],
            ["tv1", "Sony TV", "$600-$1800", true, "Model thumbnails/tv 1 43in.jpg", "addCustom", "MonitorTV","tv143", ""],

            ["default60PercentKeyboard", "60% Keyboard", "$100", true, "Model thumbnails/default60PercentKeyboardAllGrey.jpg", "addCustom", "Keyboard", "default60PercentKeyboardAllGrey",""],
            ["75PercentKeyboard", "75% Keyboard", "$80", true, "Model thumbnails/75PercentKeyboardAllGrey.jpg", "addCustom", "Keyboard", "75PercentKeyboardAllGrey",""],
            ["defaultFullKeyboard", "Full Size Keyboard", "$70", true, "Model thumbnails/defaultFullKeyboardAllGrey.jpg", "addCustom", "Keyboard", "defaultFullKeyboardAllGrey",""],
            ["TKLKeyboard", "Tenkeyless Keyboard", "$80", true, "Model thumbnails/TKLKeyboardAllGrey.jpg", "addCustom", "Keyboard", "TKLKeyboardAllGrey",""],
            ["slimKeyboard", "Slim Keyboard", "$40", false, "Model thumbnails/slim keyboard.jpg", "addDefault", "Keyboard", "slimKeyboard",""],

            ["MXMaster3", "MX Master Mouse", "$100", false, "Model thumbnails/mouse 2.jpg", "addDefault", "Mice", "MXMaster3",""],
            ["defaultMouse", "DeathAdder Mouse", "$70", false, "Model thumbnails/mouse 1 textured.jpg", "addDefault", "Mice", "defaultMouse",""],
            ["gseriesMouse", "G-Series Mouse", "$50", false, "Model thumbnails/mouse 3.jpg", "addDefault", "Mice", "gseriesMouse",""],
            
            ["QCK", "QCK Mousepad", "$7-$14", true, "Model thumbnails/small qck mousepad.jpg", "addCustom", "Mousepad", "QCKSmall",""],

            ["deskSpacingSpeaker", "Edifier Wood Grain Speakers", "$100", true, "Model thumbnails/speakers 1.jpg", "addCustom", "Speaker", "deskSpacingSpeakerPrimary",""],
            ["deskSpacingSoundBar", "Sound Bar", "$30", false, "Model thumbnails/speaker bar 1.jpg", "addDefault", "Speaker", "deskSpacingSoundBar",""],
            ["studioMonitorSpeaker", "Studio Monitor Speakers", "$90", true, "Model thumbnails/speakers 2 primary.jpg", "addCustom", "Speaker", "studioMonitorSpeakerPrimary",""],
            ["audioengineSpeaker", "Audioengine A2+ Speakers", "$86", true, "Model thumbnails/speakers 3 primary.jpg", "addCustom", "Speaker", "audioengineSpeakerPrimary",""],

            ["yetiUSBMic", "Blue Yeti USB Microphone", "$130", false, "Model thumbnails/blue yeti.jpg", "addDefault", "Audio", "yetiUSBMic",""],
            ["audioInterface", "Audio Interface", "$110", false, "Model thumbnails/audio interface.jpg", "addDefault", "Audio", "audioInterface",""],
            ["MIDIKeyboard", "MIDI Keyboard", "$120", false, "Model thumbnails/midi keyboard 1.jpg", "addDefault", "Audio", "MIDIKeyboard",""],
            ["rhodeMic", "Rhode USB Microphone", "$170", false, "Model thumbnails/microphone 2.jpg", "addDefault", "Audio", "rhodeMic",""],

            ["modernLaptop", "Modern Laptop", "$900-$1500", true, "Model thumbnails/13 inch laptop.jpg", "addCustom", "Computer", "modernLaptop13",""],
            ["modernComputerTower", "Desktop Computer", "$--", false, "Model thumbnails/desktop 1.jpg", "addDefault", "Computer", "modernComputerTower",""],
            ["miniITXTower", "Mini ITX Case", "$164", false, "Model thumbnails/desktop 2 small.jpg", "addDefault", "Computer", "miniITXTower",""],
            ["NZXTTower", "NZXT Case", "$100", false, "Model thumbnails/desktop 3.jpg", "addDefault", "Computer", "NZXTTower",""],

            ["modernOfficeChair", "Office Chair", "$250", false, "Model thumbnails/office chair.jpg", "addDefault", "FurnitureChair", "modernOfficeChair",""],
            ["simpleChair", "Simple Wood Chair", "$25", false, "Model thumbnails/simple chair.jpg", "addDefault", "FurnitureChair", "simpleChair",""],
            ["gamingChair", "Gaming Chair", "$300", true, "Model thumbnails/gaming chair.jpg", "addCustom", "FurnitureChair", "gamingChairBlack",""],

            ["regularBook", "Simple Brown Book", "$--", false, "Model thumbnails/book.jpg", "addDefault", "Misc", "regularBook",""],
            ["coffeeCup", "Coffee Cup", "$--", false, "Model thumbnails/coffee cup.jpg", "addDefault", "Misc", "coffeeCup",""],
            ["basicLamp", "Basic Lamp", "$20", false, "Model thumbnails/lamp 1.jpg", "addDefault", "Misc", "basicLamp",""],
            ["modernLamp", "Modern Lamp", "$40", false, "Model thumbnails/lamp 2.jpg", "addDefault", "Misc", "modernLamp",""],
            ["bambooMonitorShelf", "Bamboo Monitor Shelf", "$80", false, "Model thumbnails/monitor shelf.jpg", "addDefault", "Misc", "bambooMonitorShelf",""],
            ["alexMonitorShelf", "Ikea Alex Monitor Shelf", "$50", false, "Model thumbnails/monitor shelf 2.jpg", "addDefault", "Misc", "alexMonitorShelf",""],

            ["primitiveBox", "Basic Cube Placeholder", "", false, "Model thumbnails/cube primitive.jpg", "addPrimitiveReference", "PrimitiveBox", "primitiveBox",""],
            ["primitiveSphere", "Basic Sphere Placeholder", "", false, "Model thumbnails/primitive sphere.jpg", "addPrimitiveReference", "PrimitiveSphere", "primitiveSphere",""],
        ];

        var dropDownDictionary = {
            "customDesk": ["lightAlderwood", "Light Alderwood", "darkWalnut","Dark Walnut", "italianOak","Italian Oak", "zebranoWood", "Zebrano Wood", "darkParquet", "Dark Parquet"],
            "linnmonDesk": ["39", "24\"L x 39\"W", "47", "24\"L x 47\"W", "59", "24\"L x 59\"W"],
            "alexDesk": ["61", "40\"L x 61\"W", "67", "31\"L x 67\"W", "79", "24\"L x 79\"W"],
            "bekantLShaped": ["Left", "Left", "Right", "Right"],
            "malmDesk": ["Black", "Black", "White", "White", "Wood", "Veneer"],

            "largeCurved16x9Monitor": ["25", "25\"", "27", "27\"", "31", "31.5\"", "34", "34\""],
            "small16x9Monitor": ["22", "22\"", "23", "23\"", "24", "24\"", "25", "25\"", "27", "27\"", "28", "28\"", "31", "31\""],
            "flat21x9Monitor": ["25", "25\"", "29", "29\"", "34", "34\""],
            "curved21x9Monitor": ["30", "30\"", "34", "34\"", "38", "38\""],
            "curved32x9Monitor": ["43", "43.4\"", "49", "49\""],
            "tv1": ["43", "43\"", "49", "49\"", "55", "55\"", "65", "65\"", "75", "75\"", "85", "85\""],

            "default60PercentKeyboard": ["AllGrey", "Grey", "AllWhite", "White", "Minimalist", "Minimalist", "Nightrunner", "NightRunner", "WGR", "White / Grey / Red", "OBW", "Orange / Black / White"],
            "75PercentKeyboard": ["AllGrey", "Grey", "AllWhite", "White", "Minimalist", "Minimalist", "Nightrunner", "NightRunner", "WGR", "White / Grey / Red", "OBW", "Orange / Black / White", "8008", "8008"],
            "defaultFullKeyboard": ["AllGrey", "Grey", "AllWhite", "White", "Nightrunner", "NightRunner", "WGR", "White / Grey / Red", "OBW", "Orange / Black / White", "YPGrade", "Sunset"],
            "TKLKeyboard": ["AllGrey", "Grey", "AllWhite", "White", "WGR", "White / Grey / Red", "OBW", "Orange / Black / White", "YPGrade", "Sunset", "8008", "8008"],

            "deskSpacingSpeaker": ["Primary", "Primary", "Secondary", "Secondary"],
            "studioMonitorSpeaker": ["Primary", "Primary", "Secondary", "Secondary"],
            "audioengineSpeaker": ["Primary", "Primary", "Secondary", "Secondary"],

            "modernLaptop": ["13", "13\"", "15", "15\"", "17", "17\""],

            "QCK": ["Small", "Small", "Medium", "Medium", "Large", "Large", "XXL", "XXL"],

            "gamingChair": ["Black", "Black ", "BlackandWhite", "Black and White"],
        }

        var textureDictionary = {
            "lightAlderwood": 'textures/alderFineWoodTexture.jpg',
            "darkWalnut": 'textures/darkWalnut.jpg',
            "italianOak": 'textures/italianOak.jpg',
            "zebranoWood": 'textures/zebranoWood.jpg',
            "darkParquet": 'textures/darkParquet.jpg',
            "lightParquetNORM": 'textures/lightParquetNORM.jpg'
        }

        var deskHeightDiff = {
            "modernDesk": 0,
            "drawerDesk": 1.25,
            "standingDesk": -.62,
            "linnmonDesk39": 0,
            "linnmonDesk47": 0,
            "linnmonDesk59": 0,
            "alexDesk61": -1.4,
            "alexDesk67": -1.4,
            "alexDesk79": -1.4,
            "bekantLShapedLeft": -.2,
            "bekantLShapedRight": -.2,
            "customDesk": -.5,
            "malmDeskBlack": -1.4,
            "malmDeskWhite": -1.4,
            "malmDeskWood": -1.4,
            "outputPlatform": -1.2,
        }
        var heightDiff = deskHeightDiff["modernDesk"];

        //Dictionary to hold all coordinates of objects for corresponding desks
        //[x, y, z, rotationY, path]
        var coordinateDictionary = {
            "modernDesk": [0, 30.7, -53, (Math.PI / 2), 'GLTFs/desks/standing desks/standing desk 1 - 23.8Dx51.7Wx30.3H.glb'],
            "drawerDesk": [0, 1, -60, Math.PI, 'GLTFs/desks/regular desk/regular desk 1 - 29.9Dx59.9Wx31.4H.glb'],
            "standingDesk": [0, 30, -51, Math.PI + Math.PI / 2, 'GLTFs/desks/standing desks/standing desk 2 - 28.4Dx55Wx29.7H.glb'],
            "linnmonDesk39": [0, 31.2, -55, (Math.PI / 2), 'GLTFs/desks/linnmon desks/linnmon desk - 24Dx39Wx30.3H.glb'],
            "linnmonDesk47": [0, 31.2, -55, (Math.PI / 2), 'GLTFs/desks/linnmon desks/linnmon desk - 24Dx47Wx30.3H.glb'],
            "linnmonDesk59": [0, 31.2, -55, (Math.PI / 2), 'GLTFs/desks/linnmon desks/linnmon desk - 24Dx59Wx30.3H.glb'],
            "alexDesk61": [0, 29, -50, (Math.PI / 2 + (Math.PI)), 'GLTFs/desks/alex desks/alex desk - 40Dx61Wx28.7H.glb'],
            "alexDesk67": [0, 29, -50, (Math.PI / 2 + (Math.PI)), 'GLTFs/desks/alex desks/alex desk - 31Dx67Wx28.7H.glb'],
            "alexDesk79": [0, 29, -50, (Math.PI / 2 + (Math.PI)), 'GLTFs/desks/alex desks/alex desk - 24Dx79Wx28.7H.glb'],
            "bekantLShapedLeft": [0, 31, -55, (Math.PI / 2 + (Math.PI)), 'GLTFs/desks/L shaped desks/L shaped desk left.glb'],
            "bekantLShapedRight": [0, 31, -55, (Math.PI / 2 + (Math.PI)), 'GLTFs/desks/L shaped desks/L shaped desk right.glb'],
            "malmDeskBlack": [0, 29.8, -55, (Math.PI / 2), 'GLTFs/desks/malm desk/malm desk black.glb'],
            "malmDeskWhite": [0, 29.8, -55, (Math.PI / 2), 'GLTFs/desks/malm desk/malm desk white.glb'],
            "malmDeskWood": [0, 29.8, -55, (Math.PI / 2), 'GLTFs/desks/malm desk/malm desk dark ash.glb'],
            "outputPlatform": [0, 30, -55, (-Math.PI / 2), 'GLTFs/desks/output platform/output platform.glb'],
            "customDesk": [0, 30.2, -53],

            "small16x9Monitor22": [0, 32.7 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitor/16_9 monitor 3 22in.glb', '22"', '58.42cm'],
            "small16x9Monitor23": [0, 32.7 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitor/16_9 monitor 3 23in.glb', '23"', '60.96cm'],
            "small16x9Monitor24": [0, 32.7 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitor/16_9 monitor 3 24in.glb', '24"', '60.96cm'],
            "small16x9Monitor25": [0, 32.7 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitor/16_9 monitor 3 25in.glb', '25"', '63.5cm'],
            "small16x9Monitor27": [0, 32.7 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitor/16_9 monitor 3 27in.glb', '27"', '68.58cm'],
            "small16x9Monitor28": [0, 32.7 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitor/16_9 monitor 3 28in.glb', '28"', '71.12cm'],
            "small16x9Monitor31": [0, 32.7 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitor/16_9 monitor 3 31.5in.glb', '31.5"', '80.01cm'],
            "small16x9Monitor22NoStand": [0, 45 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitors no stand/16_9 monitor 3 22in no stand.glb', '22"', '56cm'],
            "small16x9Monitor23NoStand": [0, 45 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitors no stand/16_9 monitor 3 23in no stand.glb', '23"', '58cm'],
            "small16x9Monitor24NoStand": [0, 45 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitors no stand/16_9 monitor 3 24in no stand.glb', '24"', '61cm'],
            "small16x9Monitor25NoStand": [0, 45 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitors no stand/16_9 monitor 3 25in no stand.glb', '25"', '64cm'],
            "small16x9Monitor27NoStand": [0, 45 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitors no stand/16_9 monitor 3 27in no stand.glb', '27"', '69cm'],
            "small16x9Monitor28NoStand": [0, 45 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitors no stand/16_9 monitor 3 28in no stand.glb', '28"', '71cm'],
            "small16x9Monitor31NoStand": [0, 45 - 1.4 + heightDiff, -57, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 monitors no stand/16_9 monitor 3 31.5in no stand.glb', '31.5"', '80cm'],
            "largeCurved16x9Monitor25": [0, 32.6 - 1.4 + heightDiff, -59.5, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 curved monitors/curved 16 9 monitor 25in.glb', '25"', '64cm'],
            "largeCurved16x9Monitor27": [0, 32.6 - 1.4 + heightDiff, -59.5, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 curved monitors/curved 16 9 monitor 27in.glb', '27"', '69cm'],
            "largeCurved16x9Monitor31": [0, 32.6 - 1.4 + heightDiff, -59.5, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 curved monitors/curved 16 9 monitor 31.5in.glb', '31.5"', '80cm'],
            "largeCurved16x9Monitor34": [0, 32.6 - 1.4 + heightDiff, -59.5, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 curved monitors/curved 16 9 monitor 34in.glb', '34"', '102cm'],
            "largeCurved16x9Monitor25NoStand": [0, 45 - 1.4 + heightDiff, -59.5, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 curved monitors no stand/curved 16 9 monitor 25in no stand.glb', '25"', '64cm'],
            "largeCurved16x9Monitor27NoStand": [0, 45 - 1.4 + heightDiff, -59.5, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 curved monitors no stand/curved 16 9 monitor  27in.glb', '27"', '69cm'],
            "largeCurved16x9Monitor31NoStand": [0, 45 - 1.4 + heightDiff, -59.5, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 curved monitors no stand/curved large 16 9 monitor 31.5in no stand.glb', '31.5"', '80cm'],
            "largeCurved16x9Monitor34NoStand": [0, 45 - 1.4 + heightDiff, -59.5, Math.PI / 2 + Math.PI, 'GLTFs/monitors/16 9 curved monitors no stand/curved large 16 9 monitor 34in no stand.glb', '34"', '86cm'],
            "curved21x9Monitor30": [0, 32.7 - 1.4 + heightDiff, -60.5, 0, 'GLTFs/monitors/21 9 curved monitors/Ultrwide Monitor 1 30in.glb', '30"', '76cm'],
            "curved21x9Monitor34": [0, 32.7 - 1.4 + heightDiff, -60.5, 0, 'GLTFs/monitors/21 9 curved monitors/Ultrwide Monitor 1 34in.glb', '34"', '86cm'],
            "curved21x9Monitor38": [0, 32.7 - 1.4 + heightDiff, -60.5, 0, 'GLTFs/monitors/21 9 curved monitors/Ultrwide Monitor 1 38in.glb', '38"', '97cm'],
            "curved21x9Monitor30NoStand": [0, 45 - 1.4 + heightDiff, -60.5, 0, 'GLTFs/monitors/21 9 curved monitors no stand/Ultrwide Monitor 1 30in no stand.glb', '30"', '76cm'],
            "curved21x9Monitor34NoStand": [0, 45 - 1.4 + heightDiff, -60.5, 0, 'GLTFs/monitors/21 9 curved monitors no stand/Ultrwide Monitor 1 34in no stand.glb', '34"', '86cm'],
            "curved21x9Monitor38NoStand": [0, 45 - 1.4 + heightDiff, -60.5, 0, 'GLTFs/monitors/21 9 curved monitors no stand/Ultrwide Monitor 1 38in no stand.glb', '38"', '97cm'],
            "curved32x9Monitor43": [0, 32.7 - 1.4 + heightDiff, -56.8, Math.PI / 2, 'GLTFs/monitors/32 9 monitors/32_9 monitor 43.4in.glb', '43.4"', '110cm'],
            "curved32x9Monitor49": [0, 32.7 - 1.4 + heightDiff, -56.8, Math.PI / 2, 'GLTFs/monitors/32 9 monitors/32_9 monitor 49in.glb', '49"', '124cm'],
            "curved32x9Monitor43NoStand": [0, 45 - 1.4 + heightDiff, -56.8, Math.PI / 2, 'GLTFs/monitors/32 9 monitors no stand/32_9 monitor 43.4in.glb', '43.4"', '110cm'],
            "curved32x9Monitor49NoStand": [0, 45 - 1.4 + heightDiff, -56.8, Math.PI / 2, 'GLTFs/monitors/32 9 monitors no stand/32_9 monitor 49in.glb', '49"', '124cm'],
            "flat21x9Monitor25": [0, 32.7 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/21 9 monitors/21 9 monitor 2 non curved 25in.glb', '25"', '64cm'],
            "flat21x9Monitor29": [0, 32.7 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/21 9 monitors/21 9 monitor 2 non curved 29in.glb', '29"', '74cm'],
            "flat21x9Monitor34": [0, 32.7 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/21 9 monitors/21 9 monitor 2 non curved 34in.glb', '34"', '86cm'],
            "flat21x9Monitor25NoStand": [0, 45 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/21 9 monitors no stand/21 9 monitor 2 non curved 25in no stand.glb', '25"', '64cm'],
            "flat21x9Monitor29NoStand": [0, 45 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/21 9 monitors no stand/21 9 monitor 2 non curved 29in no stand.glb', '29"', '74cm'],
            "flat21x9Monitor34NoStand": [0, 45 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/21 9 monitors no stand/21 9 monitor 2 non curved 34in no stand.glb', '34"', '86cm'],
            "tv143": [0, 45 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/tv 1/tv 1 43in.glb'],
            "tv149": [0, 45 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/tv 1/tv 1 49in.glb'],
            "tv155": [0, 45 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/tv 1/tv 1 55in.glb'],
            "tv165": [0, 45 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/tv 1/tv 1 65in.glb'],
            "tv175": [0, 45 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/tv 1/tv 1 75in.glb'],
            "tv185": [0, 45 - 1.4 + heightDiff, -59, Math.PI / 2 + Math.PI, 'GLTFs/monitors/tv 1/tv 1 85in.glb'],

            "default60PercentKeyboardAllGrey": [-3, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 1 allGrey.glb', '4.3" L x 12" W x 1.4" H', '11cm L x 30cm W x 4cm '],
            "default60PercentKeyboardAllWhite": [-3, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 1 allWhite.glb', '4.3" L x 12" W x 1.4" H', '11cm L x 30cm W x 4cm '],
            "default60PercentKeyboardMinimalist": [-3, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 1 minimalist 1.glb', '4.3" L x 12" W x 1.4" H', '11cm L x 30cm W x 4cm '],
            "default60PercentKeyboardNightrunner": [-3, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 1 nightrunner.glb', '4.3" L x 12" W x 1.4" H', '11cm L x 30cm W x 4cm '],
            "default60PercentKeyboardOBW": [-3, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 1 obw.glb', '4.3" L x 12" W x 1.4" H', '11cm L x 30cm W x 4cm '],
            "default60PercentKeyboardWGR": [-3, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 1 wgr.glb', '4.3" L x 12" W x 1.4" H', '11cm L x 30cm W x 4cm '],
            "default60PercentKeyboardYPGrad": [-3, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 1 ypGrad.glb', '4.3" L x 12" W x 1.4" H', '11cm L x 30cm W x 4cm '],
            "75PercentKeyboardAllGrey": [-4, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 2 allGrey.glb', '4.3" L x 12.5" W x 1.4" H', '11cm L x 32cm W x 4cm '],
            "75PercentKeyboardAllWhite": [-4, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 2 allWhite.glb', '4.3" L x 12.5" W x 1.4" H', '11cm L x 32cm W x 4cm '],
            "75PercentKeyboardMinimalist": [-4, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 2 minimalist.glb', '4.3" L x 12.5" W x 1.4" H', '11cm L x 32cm W x 4cm '],
            "75PercentKeyboardNightrunner": [-4, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 2 nightRunner.glb', '4.3" L x 12.5" W x 1.4" H', '11cm L x 32cm W x 4cm '],
            "75PercentKeyboardOBW": [-4, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 2 obw.glb', '4.3" L x 12.5" W x 1.4" H', '11cm L x 32cm W x 4cm '],
            "75PercentKeyboardWGR": [-4, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 2 wgr.glb', '4.3" L x 12.5" W x 1.4" H', '11cm L x 32cm W x 4cm '],
            "75PercentKeyboard8008": [-4, 31.35 + heightDiff, -50, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/60 keyboards/60 Keyboard 2 8008.glb', '4.3" L x 12.5" W x 1.4" H', '11cm L x 32cm W x 4cm '],
            "defaultFullKeyboardAllGrey": [-6, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/full size keyboards/full size keyboard allGrey.glb', '5.5" L x 18" W x 1.5" H', '14cm L x 46cm W x 4cm '],
            "defaultFullKeyboardAllWhite": [-6, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/full size keyboards/full size keyboard white.glb', '5.5" L x 18" W x 1.5" H', '14cm L x 46cm W x 4cm '],
            "defaultFullKeyboardNightrunner": [-6, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/full size keyboards/full size keyboard nightRunner.glb', '5.5" L x 18" W x 1.5" H', '14cm L x 46cm W x 4cm '],
            "defaultFullKeyboardWGR": [-6, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/full size keyboards/full size keyboard wgr.glb', '5.5" L x 18" W x 1.5" H', '14cm L x 46cm W x 4cm '],
            "defaultFullKeyboardOBW": [-6, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/full size keyboards/full size keyboard obw.glb', '5.5" L x 18" W x 1.5" H', '14cm L x 46cm W x 4cm '],
            "defaultFullKeyboardYPGrade": [-6, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/full size keyboards/full size keyboard ypGrad.glb', '5.5" L x 18" W x 1.5" H', '14cm L x 46cm W x 4cm '],
            "TKLKeyboardAllGrey": [-5, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/tkl keyboards/tkl keyboard allGrey.glb'],
            "TKLKeyboardAllWhite": [-5, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/tkl keyboards/tkl keyboard allWhite.glb'],
            "TKLKeyboardOBW": [-5, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/tkl keyboards/tkl keyboard obw.glb'],
            "TKLKeyboardWGR": [-5, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/tkl keyboards/tkl keyboard wgr.glb'],
            "TKLKeyboardYGB": [-5, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/tkl keyboards/tkl keyboard ygb.glb'],
            "TKLKeyboardYPGrade": [-5, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/tkl keyboards/tkl keyboard ypGrad.glb'],
            "TKLKeyboard8008": [-5, 31.35 + heightDiff, -49, Math.PI / 2 + Math.PI, 'GLTFs/keyboards/tkl keyboards/tkl keyboard 8008.glb'],
            "slimKeyboard": [-6, 31.2 + heightDiff, -49, 0, 'GLTFs/keyboards/work keyboards/slim keyboard.glb'],

            "mediumRGBMousepad": [12, 31.25 + heightDiff, -50, Math.PI / 2 + Math.PI, 'mousepads/medium_rgb_mousepad.glb', ''],
            "QCKSmall": [9, 31.25 + heightDiff, -50, Math.PI / 2, 'GLTFs/mice and mousepads/small qck mousepad - 8.4Dx9.8W.glb', '8.4" L x 9.8" W', '21cm L x 25cm'],
            "QCKMedium": [9, 31.25 + heightDiff, -50, Math.PI / 2, 'GLTFs/mice and mousepads/medium qck mousepad - 10.6Dx12.6W.glb', '10.6" L x 12.6" W', '27cm L x 32cm'],
            "QCKLarge": [9, 31.25 + heightDiff, -53, Math.PI / 2, 'GLTFs/mice and mousepads/large qck mousepad - 15.7Dx17.7W.glb', '15.7" L x 17.7" W', '40cm L x 45cm'],
            "QCKXXL": [1, 31.35 + heightDiff, -52, Math.PI, 'GLTFs/mice and mousepads/qck mousepad XXL.glb', '15.7" L x 17.7" W', '40cm L x 45cm'],

            "defaultMouse": [9, 31.2 + heightDiff, -50, Math.PI, 'GLTFs/mice and mousepads/mouse 1 - 4.1Dx2.2Wx1.6H.glb', '4.1" L x 2.2" W x 1.6" H', '10cm L x 6cm W x 4cm '],
            "MXMaster3": [9, 31.2 + heightDiff, -50, Math.PI / 2, 'GLTFs/mice and mousepads/mouse 2 - 4.9Dx3.5Wx2H.glb', '4.9" L x 43.5" W x 2" H', '12cm L x 110cm W x 5cm '],
            "gseriesMouse": [9, 31.2 + heightDiff, -50, -Math.PI / 2, 'GLTFs/mice and mousepads/mouse 3.glb', '4.9" L x 43.5" W x 2" H', '12cm L x 110cm W x 5cm '],

            "deskSpacingSpeakerPrimary": [-18, 31.3 + heightDiff, -57, -Math.PI / 2, 'GLTFs/speakers/speakers 1 primary - 7.4Dx5.8Wx9.5H.glb', '7.4" L x 5.8" W x 9.5" H', '19cm L x 15cm W x 24cm'],
            "deskSpacingSpeakerSecondary": [18, 31.3 + heightDiff, -57, -Math.PI / 2, 'GLTFs/speakers/speakers 1 secondary - 7.4Dx5.8Wx9.5H.glb', '7.4" L x 5.8" W x 9.5" H', '19cm L x 15cm W x 24cm'],
            "deskSpacingSoundBar": [0, 31.33 + heightDiff, -53, Math.PI / 2, 'GLTFs/speakers/speaker bar 1 - 2.5Dx16Wx2.8H.glb', '2.5" L x 16" W x 2.8" H', '6cm L x 41cm W x 7cm '],
            "studioMonitorSpeakerPrimary": [-18, 31.3 + heightDiff, -57, -Math.PI / 2, 'GLTFs/speakers/speakers 2 primary - 8.3Dx7.3Wx10.3H.glb', '8.3" L x 7.3" W x 10.3" H', '21cm L x 19cm W x 26cm'],
            "studioMonitorSpeakerSecondary": [18, 31.3 + heightDiff, -57, -Math.PI / 2, 'GLTFs/speakers/speakers 2 secondary - 8.3Dx7.3Wx10.3H.glb', '8.3" L x 7.3" W x 10.3" H', '21cm L x 19cm W x 26cm'],
            "audioengineSpeakerPrimary": [18, 31.3 + heightDiff, -57, -Math.PI / 2, 'GLTFs/speakers/speakers 3 primary.glb'],
            "audioengineSpeakerSecondary": [18, 31.3 + heightDiff, -57, -Math.PI / 2, 'GLTFs/speakers/speakers 3 secondary.glb'],
            "yetiUSBMic": [-20, 31.3 + heightDiff, -50, -Math.PI / 2, 'GLTFs/music objects/blue yeti.glb'],
            "audioInterface": [-20, 31.3 + heightDiff, -58, -Math.PI / 2, 'GLTFs/music objects/audio interface.glb'],
            "rhodeMic": [-15, 32.6 + heightDiff, -50, 0, 'GLTFs/music objects/microphone 2.glb'],

            "modernLaptop13": [-17, 31.3 + .14 + heightDiff, -55, -Math.PI / 2, 'GLTFs/laptops/13 inch laptop.glb', ''],
            "modernLaptop15": [-17, 31.3 + .14 + heightDiff, -55, -Math.PI / 2, 'GLTFs/laptops/15 inch laptop.glb', ''],
            "modernLaptop17": [-17, 31.3 + .14 + heightDiff, -55, -Math.PI / 2, 'GLTFs/laptops/17 inch laptop.glb', ''],

            "modernComputerTower": [18, 31.2 + heightDiff, -50, Math.PI / 2, 'GLTFs/computer towers/desktop - 8.27Wx16.5Dx19.5H.glb', '8.3" L x 16.5" W x 19.5" H', '21cm L x 42cm W x 50cm '],
            "miniITXTower": [18, 31.2 + heightDiff, -50, 0, 'GLTFs/computer towers/desktop 2 small - 16.7Dx13.6Wx14.3H.glb', '16.7" L x 13.6" W x 14.3" H', '42cm L x 35cm W x 36cm '],
            "NZXTTower": [18, 31.2 + heightDiff, -50, -Math.PI / 2, 'GLTFs/computer towers/desktop 3.glb', '16.7" L x 13.6" W x 14.3" H', '42cm L x 35cm W x 36cm '],

            "regularBook": [20, 31.95 + heightDiff, -50, Math.PI, 'GLTFs/YYadditional decorations/book.glb', ''],
            "coffeeCup": [20, 31.25 + .14 + heightDiff, -50, 0, 'GLTFs/YYadditional decorations/coffee cup.glb', ''],
            "MIDIKeyboard": [-20, 31.23 + heightDiff, -50, Math.PI + Math.PI / 2, 'GLTFs/YYadditional decorations/midi keyboard 1 - 7.1Dx12.5Wx1.5H.glb', '7.1" L x 12.5" W x 1.5" H', '18cm L x 32cm W x 4cm '],
            "basicLamp": [20, 31.4 + .14 + heightDiff, -50, Math.PI + Math.PI / 2, 'GLTFs/lamps/lamp 1 - 8Dx5Wx9.7H.glb', '8" L x 5" W x 9.7" H', '20cm L x 13cm W x 25cm '],
            "modernLamp": [20, 31.01 + .14 + heightDiff, -50, Math.PI + Math.PI / 2, 'GLTFs/lamps/lamp 2 - 10.2Dx4Wx8.3H.glb', '10.2" L x 4" W x 8.3" H', '26cm L x 10cm W x 21cm '],
            "modernOfficeChair": [0, 2.8, -40, Math.PI + Math.PI / 2, 'GLTFs/chairs/office chair - 46.6Dx33.2Wx32.1H.glb', '10.2" L x 4" W x 8.3" H', '26cm L x 10cm W x 21cm '],
            "simpleChair": [0, 2.8, -50, Math.PI, 'GLTFs/chairs/simple chair - 36.9Dx14.5Wx18.5H.glb', '10.2" L x 4" W x 8.3" H', '26cm L x 10cm W x 21cm '],
            "gamingChairBlack": [0, 3.5, -40, Math.PI / 2, 'GLTFs/chairs/gaming chair.glb', '10.2" L x 4" W x 8.3" H', '26cm L x 10cm W x 21cm '],
            "gamingChairBlackandWhite": [0, 3.5, -40, Math.PI / 2, 'GLTFs/chairs/gaming chair black and white.glb', '10.2" L x 4" W x 8.3" H', '26cm L x 10cm W x 21cm '],
            "bambooMonitorShelf": [0, 31.18 + heightDiff, -60, Math.PI / 2, 'GLTFs/YYadditional decorations/monitor shelf.glb', '10.2" L x 4" W x 8.3" H', '26cm L x 10cm W x 21cm '],
            "alexMonitorShelf": [0, 31.7 + heightDiff, -59, -Math.PI / 2, 'GLTFs/YYadditional decorations/monitor shelf 2.glb', '10.2" L x 4" W x 8.3" H', '26cm L x 10cm W x 21cm '],

            "texturePanel": [0, 50, -75, 0, 'GLTFs/YYadditional decorations/wall texture panel.glb', '10.2" L x 4" W x 8.3" H', '26cm L x 10cm W x 21cm '],
        }

        // dimensions of objects to be added as a grid. Width, depth
        var gridObjSizes = {
            "texturePanel": [10, 10]
        }























        // SEARCH FUNCTIONALITY









        function initSearchColumn() {
            for (let i = 0; i < searchArr.length; i++) {
                let product = searchArr[i];
                
                let template = document.getElementById("productRow");
                let clone = template.content.cloneNode(true);

                let elem = clone.getElementById("productImage");
                elem.setAttribute('src', product[4]);

                elem = clone.getElementById("productTitle");
                elem.textContent = product[1];

                elem = clone.getElementById("productPrice");
                elem.textContent += product[2];

                if(product[3]) {
                    elem = clone.getElementById("productCustom");
                    elem.textContent = "Custom" + elem.textContent;
                }

                let functioncall = product[5];

                // may need to make add default. the other adds will only be in the extra options
                let addElem = clone.getElementById("productAdd");
                let replaceElem = clone.getElementById("productReplace");

                // all desk functions must start with "addDesk"
                if(product[5] == "addDesk" || product[5] == "addDeskCustom") {
                    addElem.setAttribute("onclick", "removeDeskOptionsPanel(); addDesk('" + product[6] + "','" + product[7] + "');");
                    replaceElem.style.display = "none";
                } else if(product[5] == "addPrimitiveDesk") {
                    addElem.setAttribute("onclick", "removeDeskOptionsPanel(); addPrimitiveDesk('" + product[6] + "','" + product[7] + "');");
                    replaceElem.style.display = "none";
                } else if(product[5] == "addPrimitiveReference") {
                    addElem.setAttribute("onclick", "addPrimitiveReference('" + product[6] + "','" + product[7] + "'," + "false" + ")");
                    replaceElem.setAttribute("onclick", "removeSelectedOptionsPanel(); addPrimitiveReference('" + product[6] + "','" + product[7] + "'," + "true" + ");");
                } else {
                    addElem.setAttribute("onclick", "addDefault('" + product[6] + "','" + product[7] + "'," + "false" + ")");
                    replaceElem.setAttribute("onclick", "removeSelectedOptionsPanel(); addDefault('" + product[6] + "','" + product[7] + "'," + "true" + ");");
                }

                clone.getElementById("itemList-elem").setAttribute("name", product[0]);
                clone.getElementById("itemList-elem").setAttribute("itemType", product[6])

                itemList.appendChild(clone);
            }
        }
        initSearchColumn();

        // there are issues with this code. The problem is the old code was set up so that every object was added in with any desired options already selected 
        // so that once it was in no changes would be made. In the new version, objects are added in and then their properties need to be stored and possibly changed later.
        // This conflicts with the way the old code for adding objects was written because now, among other things, we need to differentiate between an object being deleted
        // from the scene, and one being replace. There are ways to fix it but it would take time. The code works find right now, but if we were to add things in the future
        // we might need to start worrying about some of this stuff.

        // removes the options panel for the old desk. Replacing desks is a weird case, because a desk can be replaced without a desk being picked.
        function removeDeskOptionsPanel() {
            let desk = getObjectByType("Desk")[0];
            // oldOption is only null when a desk options panel is up currently, because the desk is being deleted
            if(oldOption.userData.type.includes("Desk")) {
                oldOption = null;
            }
            removeOptionsPanel(desk.userData.objectNameBase + "-" + getCountOfObject(desk.name));
        }

        // removes the options panel of the object being replaced
        function removeSelectedOptionsPanel() {
            // this funcion is only called on a replace, so oldoption will always be null because it's being deleted
            oldOption = null;
            removeOptionsPanel(pickHelper.pickedObject.userData.objectNameBase + "-" + getCountOfObject(pickHelper.pickedObject.name));
        }

        // functionality for the searching. Hides elements that don't meet search parameters.
        function itemSearch() {
            let items = document.getElementById("itemList");
            let itemArr = items.getElementsByTagName("LI"); // array of item list html elements

            let searchBar = document.getElementById("searchItems");
            let searchStr = searchBar.value.toUpperCase();

            for(let i = 0; i < itemArr.length; i++) {
                let itemTitle = itemArr[i].getElementsByTagName("H3")[0];
                let itemSearch = itemTitle.innerText.toUpperCase();

                let itemName = itemArr[i].getAttribute("name");
                let itemType = itemArr[i].getAttribute("itemType");
                itemSearch += itemName.toUpperCase();
                // check if search bar and filters match the element
                if(itemSearch.includes(searchStr) && checkFilters(itemType)) {
                    // show
                    itemArr[i].style.display = "";
                } else {
                    // hide
                    itemArr[i].style.display = "none";
                }
            }
        }

        // checks if the passed type has a filter for it
        function checkFilters(type) {
            let index = 0;
            let passFilters = false;
            while(index < filtOptArr.length && !passFilters) {
                if(type.includes(filtOptArr[index])) {
                    passFilters = true;
                }
                index++;
            }

            if(filtOptArr.length == 0) {
                passFilters = true;
            }
            return passFilters;
        }

        // hides all elements that don't match the filters
        function applyFilters() {
            let filters = document.getElementById("filterDiv");
            let filterArr = filters.getElementsByTagName("LI");
            filtOptArr = [];
            let elem;

            for(let i = 0; i < filterArr.length; i++) {
                let checkbox = filterArr[i].getElementsByTagName("INPUT")[0];

                if(checkbox.value == "on") {
                    filtOptArr.push(checkbox.getAttribute("name"));
                }
            }

            itemSearch();
        }

        // clears all currently selected filters
        function clearFilters() {
            filtOptArr = [];
            
            // unchecks all filter checkboxes
            let filters = document.getElementById("filterDiv");
            let filterArr = filters.getElementsByTagName("LI");
            let elem;
            let id;
            for(let i = 0; i < filterArr.length; i++) {
                let checkbox = filterArr[i].getElementsByTagName("INPUT")[0];
                if(checkbox.value == "on") {
                    checkbox.value = "off";
                    id = "#" + checkbox.getAttribute("id");
                    $(id).prop("checked", false);
                }
            }

            itemSearch();
        }


        // one of the most important functions. Takes in an object and displays that objects options while hiding any old options
        function displayOptions(object) {
            // check if there is already a panel for the object
            let savedPanelId = getOptionsPanel(object.userData.objectNameBase + "-" + getCountOfObject(object.name));
            let objectName = object.userData.objectNameBase;
            if(savedPanelId == "" && findSearchArrRow(objectName) != -1) {
                let itemInfo = searchArr[findSearchArrRow(objectName)];
                let optionsPanel = document.getElementById("optionsPanelContent")

                // only triggers if there is html in the options panel to be cleared
                if(oldOption != null) {
                    // hide old panel
                    let child = document.getElementById(oldOption.userData.objectNameBase + "-" + getCountOfObject(oldOption.name));
                    child.style.display = "none";
                }

                // constructs the options panel for different object types using the correct template
                let functype = itemInfo[5];
                if(functype == "addDefault" || functype == "addDesk") { // default
                    oldOption = object;

                    let template = document.getElementById("itemOptions0");
                    let clone = template.content.cloneNode(true);

                    clone.firstElementChild.className = "itemPanel";
                    clone.firstElementChild.id = object.userData.objectNameBase + "-" + getCountOfObject(object.name);
                    clone.getElementById("optionsTitle").textContent = itemInfo[1];
                    clone.getElementById("productImage").src = itemInfo[4];

                    optionsPanel.append(clone);
                } else if(functype == "addDeskCustom" || functype == "addCustom") { // object with a dropdown
                    oldOption = object;
                    let template = document.getElementById("itemOptions1");
                    let clone = template.content.cloneNode(true);
                    
                    clone.firstElementChild.className = "itemPanel";
                    clone.firstElementChild.id = object.userData.objectNameBase + "-" + getCountOfObject(object.name);
                    clone.getElementById("optionsTitle").textContent = itemInfo[1];
                    clone.getElementById("productImage").src = itemInfo[4];

                    let dropDown = dropDownDictionary[objectName];

                    let dropDownElem = clone.getElementById("drop1");
                    dropDownElem.id = objectName + "Form";
                    let elem = null;

                    for(let i = 0; i < dropDown.length; i += 2) {
                        elem = document.createElement("option");
                        elem.value = dropDown[i];
                        elem.textContent = dropDown[i + 1];

                        dropDownElem.append(elem);
                    }

                    let button = clone.getElementById("applyItemOptions");
                    if(functype == "addCustom") { // not a desk
                        button.setAttribute("onclick", itemInfo[5] + "('" + itemInfo[6] + "','" + itemInfo[0] + "', true)");
                    } else { // custom desk
                        button.setAttribute("onclick", itemInfo[5] + "('" + itemInfo[6] + "','" + itemInfo[0] + "')");
                    }

                    optionsPanel.append(clone);
                } else if(functype == "addPrimitiveDesk") { // primitive desk
                    oldOption = object;
                    let template = document.getElementById("itemOptions2");
                    let clone = template.content.cloneNode(true);

                    clone.firstElementChild.className = "itemPanel";
                    clone.firstElementChild.id = object.userData.objectNameBase + "-" + getCountOfObject(object.name);
                    clone.getElementById("optionsTitle").textContent = itemInfo[1];
                    clone.getElementById("productImage").src = itemInfo[4];

                    let dropDown = dropDownDictionary[objectName];

                    let dropDownElem = clone.getElementById("drop1");
                    dropDownElem.id = objectName + "Form";
                    let elem = null;

                    for(let i = 0; i < dropDown.length; i += 2) {
                        elem = document.createElement("option");
                        elem.value = dropDown[i];
                        elem.textContent = dropDown[i + 1];

                        dropDownElem.append(elem);
                    }

                    let field = clone.getElementById("field1");
                    field.id = object.userData.objectNameBase + "L";
                    field.value = 35;

                    field = clone.getElementById("field2");
                    field.id = object.userData.objectNameBase + "W";
                    field.value = 20;

                    let button = clone.getElementById("applyItemOptions");
                    button.setAttribute("onclick", itemInfo[5] + "('" + itemInfo[6] + "','" + itemInfo[0] + "')");

                    optionsPanel.append(clone);
                } else if(functype == "addPrimitiveReference" && object.userData.type.includes("Box")) {
                    oldOption = object;
                    let template = document.getElementById("itemOptions3");
                    let clone = template.content.cloneNode(true);

                    clone.firstElementChild.className = "itemPanel";
                    clone.firstElementChild.id = object.userData.objectNameBase + "-" + getCountOfObject(object.name);
                    clone.getElementById("optionsTitle").textContent = itemInfo[1];
                    clone.getElementById("productImage").src = itemInfo[4];

                    let elem = null;

                    let field = clone.getElementById("field1");
                    field.id = object.userData.objectNameBase + "L";
                    field.value = 10;

                    field = clone.getElementById("field2");
                    field.id = object.userData.objectNameBase + "W";
                    field.value = 10;

                    field = clone.getElementById("field3");
                    field.id = object.userData.objectNameBase + "H";
                    field.value = 10;

                    let button = clone.getElementById("applyItemOptions");
                    button.setAttribute("onclick", itemInfo[5] + "('" + itemInfo[6] + "','" + itemInfo[0] + "', true)");

                    optionsPanel.append(clone);
                } else if(functype == "addPrimitiveReference" && object.userData.type.includes("Sphere")) {
                    oldOption = object;
                    let template = document.getElementById("itemOptions4");
                    let clone = template.content.cloneNode(true);

                    clone.firstElementChild.className = "itemPanel";
                    clone.firstElementChild.id = object.userData.objectNameBase + "-" + getCountOfObject(object.name);
                    clone.getElementById("optionsTitle").textContent = itemInfo[1];
                    clone.getElementById("productImage").src = itemInfo[4];

                    let elem = null;

                    let field = clone.getElementById("field1");
                    field.id = object.userData.objectNameBase + "Radius";
                    field.value = 5;

                    let button = clone.getElementById("applyItemOptions");
                    button.setAttribute("onclick", itemInfo[5] + "('" + itemInfo[6] + "','" + itemInfo[0] + "', true)");

                    optionsPanel.append(clone);
                } else if(functype == "addMonitor") {
                    oldOption = object;
                    let template = document.getElementById("itemOptions5");
                    let clone = template.content.cloneNode(true);

                    clone.firstElementChild.className = "itemPanel";
                    clone.firstElementChild.id = object.userData.objectNameBase + "-" + getCountOfObject(object.name);
                    clone.getElementById("optionsTitle").textContent = itemInfo[1];
                    clone.getElementById("productImage").src = itemInfo[4];

                    let dropDown = dropDownDictionary[objectName];

                    let dropDownElem = clone.getElementById("drop1");
                    dropDownElem.id = objectName + "Form";
                    let elem = null;

                    for(let i = 0; i < dropDown.length; i += 2) {
                        elem = document.createElement("option");
                        elem.value = dropDown[i];
                        elem.textContent = dropDown[i + 1];

                        dropDownElem.append(elem);
                    }

                    let checkbox = clone.getElementById("check1");
                    checkbox.id = object.userData.objectNameBase + "Stand";
                    checkbox.setAttribute("onclick","toggleCheck('" + checkbox.id +"')");

                    let button = clone.getElementById("applyItemOptions");
                    button.setAttribute("onclick", itemInfo[5] + "('" + itemInfo[6] + "','" + itemInfo[0] + "', true)");

                    optionsPanel.append(clone);
                }
            } else if(findSearchArrRow(objectName) != -1) { // saved panel exists
                
                // hides the old panel, if there is one currently displayed
                if(oldOption != null) {
                    document.getElementById(oldOption.userData.objectNameBase + "-" + getCountOfObject(oldOption.name)).style.display = "none";
                }
                oldOption = object;
                document.getElementById(savedPanelId).style.display = "";
            }
        }

        // finds an existing panel by name, if it exists
        function getOptionsPanel(name) {
            let panels = document.getElementsByClassName("itemPanel");
            let result = "";

            for(let i = 0; i < panels.length; i++) {
                if(panels[i].id == name) {
                    result = panels[i].id;
                }
            }
            console.log("finished searching for panels")
            return result;
        }

        // finds desired row based on the object name passed in 
        function findSearchArrRow(name) {
            let index = 0;
            let resIndex = -1;
            while(index < searchArr.length) {
                if(searchArr[index][0] == name) {
                    resIndex = index;
                }
                index++;
            }
            if(resIndex == -1) {
                console.log(name);
                console.log("Error: cannot find row in searchArr");
            }

            return resIndex;
        }

        // this function finds the base name (Ex. linnmonDesk) from the full name (Ex. linnmonDesk39)
        // this is a bad solution, but I don't know a better one
        function findBaseName(name) {
            let index = 0;
            let exitCode = true;
            let baseName = "";

            while(index < searchArr.length) {
                if(name.includes(searchArr[index][0])) {
                    baseName = searchArr[index][0];
                    index = searchArr.length;
                    exitCode = false;
                }
                index++;
            }

            if(exitCode) {
                console.log("Error: cannot find base name");
            }

            return baseName;
        }

        function removeOptionsPanel(id) {
            let panel = document.getElementById(id);
            panel.parentNode.removeChild(panel);
        }

        function hideOptionsPanel() {
            if(oldOption != null) {
                document.getElementById(oldOption.userData.objectNameBase + "-" + getCountOfObject(oldOption.name)).style.display = "none";
                oldOption = null;
            }
        }

        



















        // INITIALIZATION





        //Loader for the room
        /*loader.load('rooms/room_2_no_roof.glb', function (gltf) {
            var theModel = gltf.scene;
            theModel.traverse((o) => {
                if (o.isMesh) {
                    o.castShadow = true;
                    o.receiveShadow = true;
                }
            });
            scene.add(gltf.scene);
        }, undefined, function (error) {
            console.error(error);
        });*/

        function render() {
            renderer.render(scene, camera);
        }

        function animate() {
            requestAnimationFrame(animate); // asynch animate loop
            camera.updateProjectionMatrix();
            controls.update();
            renderer.render(scene, camera);
            //Commented out logs below print the current rotation and position of camera
            //console.log("CAMERA POSITION X,Y,Z: " + camera.position.x + ", " + camera.position.y + ", " + camera.position.z);
            //console.log("CAMERA ROTATION X,Y,Z: " + camera.rotation.x + ", " + camera.rotation.y + ", " + camera.rotation.z);
        }
        animate();
        var x = 10;

        function initializeObjects() {
            addDefault("DeskNoSelect", "modernDesk", false); // uses addDefault instead of addDesk because there is no previous desk
            addFloorInit("PrimitiveBoxFloorFurnitureNoSelect", "floor");
            addDefault("Monitor", "small16x9Monitor28", false);
            addDefault("Mouse", "defaultMouse", false);
            addDefault("Keyboard", "default60PercentKeyboardAllGrey", false);
            addDefault("Mousepad", "QCKSmall", false);
        }
        //initializeObjects();

        function removeArrElem(array, index) {
            let tempArr = [];

            for (let i = 0; i < array.length; i++) {
                if (i != index) {
                    tempArr.push(array[i]);
                }
            }

            return tempArr;
        }












        // OBJECT ADDING FUNCTIONS


        function addGrid(objectType, objectName, cells) {
            enablePicking(); // resets pick enabled if it was disabled by something else

            let filePath = coordinateDictionary[objectName][4];

            loader.load(filePath, function (gltf) {
                let object = gltf.scene.children[0];

                // for loop to check if there are any duplicate objects
                let highest = 0;
                let objCount = 0;
                
                // shadows
                gltf.scene.traverse(function (object) {
                    if (object.isMesh) {
                        object.castShadow = true;
                        object.receiveShadow = true;
                    }
                });

                // display object options
                //displayOptions(object); !!!!
            }, undefined, function (error) {
                console.error(error);
            });

            let coordDictArr = coordinateDictionary[object.userData.objectNameBase];
            let dims = gridObjSizes[object.userData.objectNameBase];
            let elem;
            let gridObj = new THREE.Group();

            for(let i = 0; i < cells[0]; i++) { // down column
                for(let j = 0; j < cells[1]; j++) { // across row
                    elem = assign({}, object); // shallow copy the object

                    elem.position.set(j * dims[0], i * dims[1], 0);
                    elem.name = "i: " + i + " j: " + j;

                    gridObj.children.push(elem);
                }
            }

            objCount = calcObjectNumber(objectName);

            gridObj.name = objectName + "-" + objCount;
            gridObj.userData.objectName = objectName;
            gridObj.userData.objectNameBase = findBaseName(objectName);
            gridObj.userData.type = objectType;

            objectsArr.push(gridObj);
            scene.add(gridObj);
        }

        // add a custom primitive desk
        function addPrimitiveDesk(objectType, objectName) {
            enablePicking(); // this will get done again in addObject, but I need to do it here so the code to replace the desk works

            // handles a new primitive desk being added
            let geometry;
            let textureName;
            if(document.getElementById(objectName + "L") != null) {
                geometry = new THREE.BoxBufferGeometry(document.getElementById(objectName + "L").value, "1", document.getElementById(objectName + "W").value);
                textureName = document.getElementById(objectName + "Form").value;
            } else {
                geometry = new THREE.BoxBufferGeometry(35, 1, 20);
                textureName = "lightAlderwood";
            }

            let texture = new THREE.TextureLoader().load(textureDictionary[textureName]);
            let material = new THREE.MeshLambertMaterial({ map: texture });
            material.name = textureName;

            pickHelper.pick(getObjectByType("Desk")[0]);
            let oldDesk = pickHelper.pickedObject.userData.objectName;
            pickHelper.deletePicked();

            // add object to scene and make a group
            let object = addPrimitive(objectType, objectName, geometry, material);

            updateDeskHeightDiff(objectName, oldDesk);

            let posArr = coordinateDictionary[objectName];
            object.position.set(posArr[0], posArr[1], posArr[2]);
        }

        // adds the floor for the intialization function
        function addFloorInit(objectType, objectName) {
            let geometry = new THREE.BoxBufferGeometry(100, 2, 70);
            let texture = new THREE.TextureLoader().load(textureDictionary["darkParquet"]);
            let material = new THREE.MeshLambertMaterial({ map: texture });
            material.name = "darkParquet";

            let object = addPrimitive(objectType, objectName, geometry, material)

            object.position.set(0, 0, -40);
        }

        // add a reference primitive object
        function addPrimitiveReference(objectType, objectName, replace) {
            // create box or sphere geometry
            let geometry;
            let width = 0;
            if (objectType.includes("Box")) {
                if(document.getElementById(objectName + "L") != null) {
                    geometry = new THREE.BoxBufferGeometry(document.getElementById(objectName + "L").value,
                    document.getElementById(objectName + "W").value,
                    document.getElementById(objectName + "H").value);
                    width = document.getElementById(objectName + "W").value / 2;
                } else {
                    geometry = new THREE.BoxBufferGeometry(10,10,10);
                    width = 5;
                }
            } else if (objectType.includes("Sphere")) {
                if(document.getElementById(objectName + "Radius") != null) {
                    geometry = new THREE.OctahedronBufferGeometry(document.getElementById(objectName + "Radius").value, 5);
                    width = document.getElementById(objectName + "Radius").value;
                } else {
                    geometry = new THREE.OctahedronBufferGeometry(5, 5);
                    width = 5;
                }
            } else {
                console.log("Error: invalid primitive type");
            }
            // create material
            let material = new THREE.MeshLambertMaterial({ color: 0x202020 })
            material.name = "null";

            // add object to scene and make a group
            var object = addPrimitive(objectType, objectName, geometry, material); // this function is not getting called for some reason

            // set position, reset if object is being replaced, and delete previous object
            let position = new THREE.Vector3(0, 31.7 + heightDiff + (width - .5), -57);
            if (replace && pickHelper.pickedObject != null) {
                // only use x and z of the old object and keep y untouched
                position.set(pickHelper.pickedObject.position.x, position.y, pickHelper.pickedObject.position.z);
                pickHelper.deletePicked();
            }

            object.position.set(position.x, position.y, position.z);
            pickHelper.pick(object);
        }


        // add a primitive object base function
        function addPrimitive(objectType, objectName, geometry, material) {
            enablePicking(); // resets pick enabled if it was disabled by something else

            let mesh = new THREE.Mesh(geometry, material);
            let object = new THREE.Group();
            mesh.castShadow = true;
            mesh.receiveShadow = true;

            // adds the primitive mesh to a group, so it is the same type as everything else in the scene
            object.add(mesh);

            // make sure the object is getting a unique name
            objCount = calcObjectNumber(objectName);

            object.name = objectName + "-" + objCount;

            object.userData.type = objectType;
            object.userData.objectName = objectName;
            object.userData.objectNameBase = findBaseName(objectName);

            objectsArr.push(object);
            scene.add(object);

            console.log("New primitive just added to the scene: ");
            console.log(object);

            // display object options
            displayOptions(object);

            return object;
        }

        // add any object with a dropdown and checkbox field, including monitors
        function addMonitor(objectType, objectNameBase, replace) {
            // check size
            let objectName = objectNameBase + document.getElementById(objectNameBase + "Form").value;

            // check for stand
            if (document.getElementById(objectNameBase + "Stand").value == "on") {
                objectName += "NoStand";
            }

            addDefault(objectType, objectName, replace);
        }

        // add an object with one custom parameter
        function addCustom(objectType, baseObjectName, replace) {
            let objectName = baseObjectName + document.getElementById(baseObjectName + "Form").value;

            addDefault(objectType, objectName, replace);
        }

        // basic add function for adding a gltf. 
        function addDefault(objectType, objectName, replace) {
            addObject(objectName, function (object) {
                let coordDictArr = coordinateDictionary[objectName];

                let pos = new THREE.Vector3(coordDictArr[0], coordDictArr[1], coordDictArr[2]);
                let rot = new THREE.Vector3(0, coordDictArr[3], 0);

                object.userData.type = objectType;

                // replace object if replace is true
                if (replace && pickHelper.pickedObject != null) {
                    // only use x and y of the old object
                    pos.set(pickHelper.pickedObject.position.x, pos.y, pickHelper.pickedObject.position.z);
                    pickHelper.deletePicked();
                }
                pickHelper.pick(object);

                // set position and rotation
                object.position.set(pos.x, pos.y, pos.z);
                object.rotation.set(rot.x, rot.y, rot.z);

                return object;
            });
        }

        // add object using dictionary coords. Most barebones add function. Won't work right called on its own
        function addObject(objectName, callBack) {
            enablePicking(); // resets pick enabled if it was disabled by something else

            let filePath = coordinateDictionary[objectName][4];

            loader.load(filePath, function (gltf) {
                let object = gltf.scene.children[0];

                // for loop to check if there are any duplicate objects
                let highest = 0;
                let objCount = 0;
                
                objCount = calcObjectNumber(objectName);
                    

                // give object unique name and basic name
                object.name = objectName + "-" + objCount;
                object.userData.objectName = objectName;
                object.userData.objectNameBase = findBaseName(objectName);

                // shadows
                gltf.scene.traverse(function (object) {
                    if (object.isMesh) {
                        object.castShadow = true;
                        object.receiveShadow = true;
                    }
                });

                objectsArr.push(object); // create new group at end of array
                scene.add(object);

                object = callBack(object);


                console.log(objectName + " was just added to the scene. Object: ");
                console.log(object);
                x = x + 1; // idk what this is

                // display object options
                displayOptions(object);
            }, undefined, function (error) {
                console.error(error);
            });
        }

        // add desk
        function addDesk(objectType, objectName) {
            enablePicking(); // this will get done again in addObject, but I need to do it here so the code to replace the desk works

            // pick the old desk, store it, and delete it
            pickHelper.pick(getObjectByType("Desk")[0]);
            let oldDesk = pickHelper.pickedObject.userData.objectName;
            pickHelper.deletePicked();

            // call base function for adding single object
            addDefault(objectType, objectName, false);

            // update height of all objects and unselect the new desk so it can't be accidentally deleted
            updateDeskHeightDiff(objectName, oldDesk);

            pickHelper.unselectPickedObject();
        }

        function addDeskCustom(objectType, baseObjectName) {
            enablePicking(); // this will get done again in addObject, but I need to do it here so the code to replace the desk works

            // get exact name of the object to add using the form
            let objectName = baseObjectName + document.getElementById(baseObjectName + "Form").value

            // pick the old desk, store it, and delete it
            pickHelper.pick(getObjectByType("Desk")[0]);
            let oldDesk = pickHelper.pickedObject.userData.objectName;
            pickHelper.deletePicked();

            // call base function now that we have the complete name
            addDefault(objectType, objectName, false);

            // update heighy for all objects
            updateDeskHeightDiff(objectName, oldDesk);
        }

        // add an object with position and rotation as inputs
        function addDefaultPosRot(objectType, objectName, posi, roti) {
            console.log("OBJECT NAME");
            console.log(objectName);

            addObject(objectName, function (object) {
                let pos = posi;
                let rot = roti;

                object.userData.type = objectType;

                pickHelper.pick(object);

                // set position and rotation
                object.position.set(pos.x, pos.y, pos.z);
                object.rotation.set(rot.x, rot.y, rot.z);

                return object;
            });
        }

        function addPrimitivePosRotDimText(objectType, objectName, pos, rot, dim, textureName) {
            // create box or sphere geometry
            let geometry = null;
            let width = 0;
            if (objectType.includes("Box")) {
                geometry = new THREE.BoxBufferGeometry(dim.x, dim.y, dim.z);
            } else if (objectType.includes("Sphere")) {
                geometry = new THREE.OctahedronBufferGeometry(dim.x, 5);
            } else {
                console.log("Error: invalid primitive type");
            }

            let texture = null;
            let material = null;
            // create material
            if (textureName != "null") {
                texture = new THREE.TextureLoader().load(textureDictionary[textureName]);
                material = new THREE.MeshLambertMaterial({ map: texture });
            } else {
                material = new THREE.MeshLambertMaterial({ color: 0x202020 });
            }
            material.name = textureName;

            // add object to scene and make a group
            var object = addPrimitive(objectType, objectName, geometry, material);

            object.position.set(pos.x, pos.y, pos.z);
            object.rotation.set(rot.x, rot.y, rot.z);

        }



















        // OTHER FUNCTIONS



        // finds any objects that have a type string with the objectType string in it, and a returns an array of those objects
        function getObjectByType(objectType) {
            var object = [];
            for (let i = 0; i < objectsArr.length; i++) {
                if (objectsArr[i].userData.type.includes(objectType)) {
                    object.push(objectsArr[i]);
                }
            }

            return object;
        }

        // !!! unsure if this works. but it's not currently used
        function getObjectByObjectName(objectName) {
            var object = [];
            for (let i = 0; i < objectsArr.length; i++) {
                if (objectsArr[i].userData.objectName == objectName) {
                    object.push(objectsArr[i]);
                }
            }

            return object;
        }

        // find the object number needed to make the name string unique
        function calcObjectNumber(name) {
            let highest = 0;
            let count = 0;
            for(let i = 0; i < objectsArr.length; i ++) {
                if(name == objectsArr[i].userData.objectName) {
                    count = getCountOfObject(objectsArr[i].name)
                    if(count >= highest) {
                        highest = count + 1;
                    }
                }
            }

            return highest;
        }
        
        // extract the number from the object's unique name string
        function getCountOfObject(objectName) {
            let index = objectName.length - 1;
            while (objectName.charAt(index) != '-' && index >= 0) {
                index--;
            }
            return parseInt(objectName.substring(index + 1));
        }

        function updateDeskHeightDiff(deskName, oldDesk) {
            let position = new THREE.Vector3();
            let object;

            for (let i = 0; i < objectsArr.length; i++) {
                object = objectsArr[i];
                position = object.position;
                if (!object.userData.type.includes("Furniture")) {

                    object.position.set(position.x, position.y + (deskHeightDiff[deskName] - deskHeightDiff[oldDesk]), position.z);
                }
            }
            heightDiff = deskHeightDiff[deskName];
        }

        // clears the scene of all objects
        function resetScene() {
            for (let i = objectsArr.length - 1; i >= 0; i--) {
                console.log("REMOVED:");
                console.log(objectsArr[i]);

                enablePicking();

                pickHelper.pick(objectsArr[i]);
                pickHelper.deletePicked();
            }
            console.log("OBJECTS ARRAY AFTER RESET:");
            console.log(objectsArr);
        }

        // takes in the shareable string and places all the objects contained in it
        function parseShareableString(string) {
            pickHelper.pickedObject = null;
            resetScene();
            heightDiff = 0;


            let dataType = 0;
            let objectName = "";
            let objectType = "";
            let textureName = "";

            let vector = new THREE.Vector3();
            let position = new THREE.Vector3();
            let rotation = new THREE.Vector3();
            let dimension = new THREE.Vector3();
            let vecStr = "";
            let xyz;
            let primitiveData = false;

            let object;

            let index = 2;
            let exitCode = 0; // becomes 1 if there is a problem in the string
            let c = string.charAt(0);
            if (c == '[') {
                //while loop to go through string
                while (c != ']' && !exitCode) {
                    c = string.charAt(index);

                    if (c == ' ') {
                        dataType = 0;
                        objectType = "";
                        objectName = "";
                        textureName = "";
                    } else if (c == '^') { // toggle primitive mode
                        primitiveData = !primitiveData;
                    } else if (primitiveData) { // primitive
                        if (c == '|') {
                            if (dataType == 0) {
                                // type
                            } else if (dataType == 1) {
                                // name
                                if (objectType.includes("Desk")) {
                                    updateDeskHeightDiff(objectName, "modernDesk");
                                }
                            } else if (dataType == 2) {
                                // position
                                //console.log("SETTING POSITION");
                                position = vector;
                                //console.log(position);
                                vector = new THREE.Vector3(); // without this it doesn't work for some reason
                            } else if (dataType == 3) {
                                // rotation
                                //console.log("SETTING ROTATION");
                                rotation = vector;
                                //console.log(rotation);
                                vector = new THREE.Vector3(); // without this it doesn't work for some reason
                            } else if (dataType == 4) {
                                // dimensions
                                dimension = vector;

                                vector = new THREE.Vector3();
                            } else if (dataType == 5) {
                                // texture name
                                addPrimitivePosRotDimText(objectType, objectName, position, rotation, dimension, textureName);
                                objectType = "";
                                objectName = "";
                                textureName = "";
                            }
                            dataType++;
                            xyz = 0
                        } else {
                            if (dataType == 0) {
                                // getting the objectType
                                objectType += c;
                            } else if (dataType == 1) {
                                // getting the objectName
                                objectName += c;
                            } else if (dataType == 2 || dataType == 3 || dataType == 4) {
                                // getting the position or rotation
                                if (c != ',') {
                                    vecStr += c;
                                } else {
                                    if (xyz == 0) {
                                        //console.log("VECTOR X: " + vecStr)
                                        vector.x = parseFloat(vecStr);
                                    } else if (xyz == 1) {
                                        //console.log("VECTOR Y: " + vecStr)
                                        vector.y = parseFloat(vecStr);
                                    } else if (xyz == 2) {
                                        //console.log("VECTOR Z: " + vecStr)
                                        vector.z = parseFloat(vecStr);
                                    } else {
                                        console.log("UH OH");
                                        exitCode = 1;
                                    }
                                    vecStr = "";
                                    xyz++;
                                }
                            } else if (dataType == 5) {
                                textureName += c;
                            } else {
                                console.log("PARSE ERROR. INDEX IS: " + index + "c is: " + c + "datatype is: " + dataType);
                                exitCode = 1;
                            }
                        }
                    } else { // not primitive
                        if (c == '|') {
                            if (dataType == 0) {
                                // type
                            } else if (dataType == 1) {
                                // name
                                if (objectType.includes("Desk")) {
                                    updateDeskHeightDiff(objectName, "modernDesk");
                                }
                            } else if (dataType == 2) {
                                // position
                                //console.log("SETTING POSITION");
                                position = vector;
                                //console.log(position);
                                vector = new THREE.Vector3(); // without this it doesn't work for some reason
                            } else if (dataType == 3) {
                                // rotation
                                //console.log("SETTING ROTATION");
                                rotation = vector;
                                //console.log(rotation);
                                vector = new THREE.Vector3(); // without this it doesn't work for some reason

                                //console.log("THE VECTORS BEING PASSED FOR OBJECT: " + objectName);
                                //console.log(position);
                                //console.log(rotation);
                                addDefaultPosRot(objectType, objectName, position, rotation);
                                objectType = "";
                                objectName = "";
                            }
                            dataType++;
                            xyz = 0
                        } else {
                            if (dataType == 0) {
                                // getting the objectType
                                objectType += c;
                            } else if (dataType == 1) {
                                // getting the objectName
                                objectName += c;
                            } else if (dataType == 2 || dataType == 3) {
                                // getting the position or rotation
                                if (c != ',') {
                                    vecStr += c;
                                } else {
                                    if (xyz == 0) {
                                        //console.log("VECTOR X: " + vecStr)
                                        vector.x = parseFloat(vecStr);
                                    } else if (xyz == 1) {
                                        //console.log("VECTOR Y: " + vecStr)
                                        vector.y = parseFloat(vecStr);
                                    } else if (xyz == 2) {
                                        //console.log("VECTOR Z: " + vecStr)
                                        vector.z = parseFloat(vecStr);
                                    } else {
                                        console.log("UH OH");
                                        exitCode = 1;
                                    }
                                    vecStr = "";
                                    xyz++;
                                }
                            } else {
                                console.log("PARSE ERROR. INDEX IS: " + index + "c is: " + c + "datatype is: " + dataType);
                                exitCode = 1;
                            }
                        }
                    }
                    index++;
                }
                if (index > 10000) {
                    exitCode = 1;
                    console.log("infinite loop");
                }
            } else {
                console.log("Error: invalid input string");
                exitCode = 1;
            }

        }

        // creates the shareable string
        function createShareableString() {
            let shareableString = "[ ";
            let object = null;
            let mesh = null;
            for (let i = 0; i < objectsArr.length; i++) {
                object = objectsArr[i];
                if (object.userData.type.includes("Primitive")) {
                    shareableString += '^';
                }

                shareableString += object.userData.type + "|";
                shareableString += object.userData.objectName + "|";
                shareableString += object.position.x + "," + object.position.y + "," + object.position.z + ",|";
                shareableString += object.rotation.x + "," + object.rotation.y + "," + object.rotation.z + ",|";
                if (object.userData.type.includes("Primitive")) {
                    mesh = object.children[0];
                    if (object.userData.type.includes("Box")) {
                        shareableString += mesh.geometry.parameters.width + "," + mesh.geometry.parameters.height + "," + mesh.geometry.parameters.depth + ",|";
                    } else if (object.userData.type.includes("Sphere")) {
                        shareableString += mesh.geometry.parameters.radius + "," + "-1" + "," + "-1" + ",|";
                    } else {
                        console.log("Error creating shareable string: unknown primitive shape");
                    }
                    shareableString += mesh.material.name + "|^";
                }
                shareableString += " ";
            }

            shareableString += "]";
            console.log(shareableString);
            return shareableString;
        }

        function loadCustomSetup() {
            var returnedParams = parseURLParams(window.location.href);
            if (returnedParams != undefined) {
                if (returnedParams.hasOwnProperty("customSetup")) {
                    parseShareableString(returnedParams["customSetup"][0]);
                }
            } else {
                initializeObjects();
            }


            //console.log
            //initializeObjects();
        }

        function createCustomLink() {
            var originalLink = "https://deskspacing.com/mainApp.html";
            var shareableString = createShareableString();
            var customLink = "https://deskspacing.com/mainApp.html" + "?" + "customSetup=" + shareableString;
            console.log(customLink);
            return customLink;
        }
        createCustomLink();
        //This function call checks if the URL has custom data, and implements that data if so
        loadCustomSetup();
        //From StackOverflow https://stackoverflow.com/questions/814613/how-to-read-get-data-from-a-url-using-javascript
        function parseURLParams(url) {
            var queryStart = url.indexOf("?") + 1,
                queryEnd = url.indexOf("#") + 1 || url.length + 1,
                query = url.slice(queryStart, queryEnd - 1),
                pairs = query.replace(/\+/g, " ").split("&"),
                parms = {}, i, n, v, nv;

            if (query === url || query === "") return;

            for (i = 0; i < pairs.length; i++) {
                nv = pairs[i].split("=", 2);
                n = decodeURIComponent(nv[0]);
                v = decodeURIComponent(nv[1]);

                if (!parms.hasOwnProperty(n)) parms[n] = [];
                parms[n].push(nv.length === 2 ? v : null);
            }
            return parms;
        }
    </script>
</body>
</html>